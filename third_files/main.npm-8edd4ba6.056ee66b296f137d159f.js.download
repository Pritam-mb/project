"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7760],{52367:(t,e,s)=>{s.d(e,{Z:()=>l});const i={Fn:function(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(e),i=new Uint8Array(s.length);for(let t=0;t<s.length;++t)i[t]=s.charCodeAt(t);return i}},n={Y:function(){const t=(t=!1)=>{const e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e};return t()+t(!0)+t(!0)+t()}};class r{constructor(t,e){this.database=t,this.j=e,this.parent="undefined"==typeof window?self:window,this.database=t,this.j=e}td(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var t;try{if(null==this.td())return!1;{const e=null===(t=this.td())||void 0===t?void 0:t.open("Braze IndexedDB Support Test");if(e&&(e.onupgradeneeded=()=>e.result.close(),e.onsuccess=()=>e.result.close()),"undefined"!=typeof window){const t=window,e=t.chrome||t.browser||t.ed;if(e&&e.runtime&&e.runtime.id)return this.j.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}}catch(t){return this.j.info("Not using IndexedDB for storage due to following error: "+t),!1}}nd(t,e){var s;const i=null===(s=this.td())||void 0===s?void 0:s.open(this.database.od,this.database.VERSION);if(null==i)return"function"==typeof e&&e(),!1;const n=this;return i.onupgradeneeded=t=>{var e;n.j.info("Upgrading indexedDB "+n.database.od+" to v"+n.database.VERSION+"...");const s=null===(e=t.target)||void 0===e?void 0:e.result;for(const t in n.database.Jt){const e=t;n.database.Jt.hasOwnProperty(t)&&!s.objectStoreNames.contains(n.database.Jt[e])&&s.createObjectStore(n.database.Jt[e])}},i.onsuccess=s=>{var i;const r=null===(i=s.target)||void 0===i?void 0:i.result;r.onversionchange=()=>{r.close(),"function"==typeof e&&e(),n.j.error("Needed to close the database unexpectedly because of an upgrade in another tab")},t(r)},i.onerror=t=>{var s;const i=t;return n.j.info("Could not open indexedDB "+n.database.od+" v"+n.database.VERSION+": "+(null===(s=i.target)||void 0===s?void 0:s.errorCode)),"function"==typeof e&&e(),!0},!0}setItem(t,e,s,i,n){if(!this.isSupported())return"function"==typeof n&&n(),!1;const r=this;return this.nd((o=>{if(!o.objectStoreNames.contains(t))return r.j.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.od+" - "+t+" is not a valid objectStore"),"function"==typeof n&&n(),void o.close();const a=o.transaction([t],"readwrite");a.oncomplete=()=>o.close();const l=a.objectStore(t).put(s,e);l.onerror=()=>{r.j.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.od),"function"==typeof n&&n()},l.onsuccess=()=>{"function"==typeof i&&i()}}),n)}getItem(t,e,s){if(!this.isSupported())return!1;const i=this;return this.nd((n=>{if(!n.objectStoreNames.contains(t))return i.j.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+i.database.od+" - "+t+" is not a valid objectStore"),void n.close();const r=n.transaction([t],"readonly");r.oncomplete=()=>n.close();const o=r.objectStore(t).get(e);o.onerror=()=>{i.j.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+i.database.od)},o.onsuccess=t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.result;null!=i&&s(i)}}))}hr(t,e,s){if(!this.isSupported())return"function"==typeof s&&s(),!1;const i=this;return this.nd((n=>{if(!n.objectStoreNames.contains(t))return i.j.error("Could not retrieve last record from "+t+" on indexedDB "+i.database.od+" - "+t+" is not a valid objectStore"),"function"==typeof s&&s(),void n.close();const r=n.transaction([t],"readonly");r.oncomplete=()=>n.close();const o=r.objectStore(t).openCursor(null,"prev");o.onerror=()=>{i.j.error("Could not open cursor for "+t+" on indexedDB "+i.database.od),"function"==typeof s&&s()},o.onsuccess=t=>{var i;const n=null===(i=t.target)||void 0===i?void 0:i.result;null!=n&&null!=n.value&&null!=n.key?e(n.key,n.value):"function"==typeof s&&s()}}),s)}oe(t,e){if(!this.isSupported())return!1;const s=this;return this.nd((i=>{if(!i.objectStoreNames.contains(t))return s.j.error("Could not delete record "+e+" from "+t+" on indexedDB "+s.database.od+" - "+t+" is not a valid objectStore"),void i.close();const n=i.transaction([t],"readwrite");n.oncomplete=()=>i.close(),n.objectStore(t).delete(e).onerror=()=>{s.j.error("Could not delete record "+e+" from "+t+" on indexedDB "+s.database.od)}}))}Mt(t,e){if(!this.isSupported())return!1;const s=this;return this.nd((i=>{if(!i.objectStoreNames.contains(t))return s.j.error("Could not retrieve objects from "+t+" on indexedDB "+s.database.od+" - "+t+" is not a valid objectStore"),void i.close();const n=i.transaction([t],"readwrite");n.oncomplete=()=>i.close();const r=n.objectStore(t),o=r.openCursor(),a=[];o.onerror=()=>{a.length>0?(s.j.info("Cursor closed midway through for "+t+" on indexedDB "+s.database.od),e(a)):s.j.error("Could not open cursor for "+t+" on indexedDB "+s.database.od)},o.onsuccess=t=>{var s;const i=null===(s=t.target)||void 0===s?void 0:s.result;null!=i?(null!=i.value&&null!=i.key&&(r.delete(i.key).onsuccess=()=>{a.push(i.value)}),"function"==typeof i.continue&&i.continue()):a.length>0&&e(a)}}))}clearData(){if(!this.isSupported())return!1;const t=[];for(const e in this.database.Jt){const s=e;this.database.Jt.hasOwnProperty(e)&&this.database.Jt[s]!==this.database.Jt.se&&t.push(this.database.Jt[s])}const e=this;return this.nd((function(s){const i=s.transaction(t,"readwrite");i.oncomplete=()=>s.close();for(let s=0;s<t.length;s++){const n=t[s];i.objectStore(n).clear().onerror=function(){e.j.error("Could not clear "+this.source.name+" on indexedDB "+e.database.od)}}i.onerror=function(){e.j.error("Could not clear object stores on indexedDB "+e.database.od)}}))}}r.ep={Ft:{od:"AppboyServiceWorkerAsyncStorage",VERSION:6,Jt:{Ja:"data",kr:"pushClicks",cu:"pushSubscribed",dd:"fallbackDevice",qt:"cardUpdates",se:"optOut",wr:"pendingData",qh:"sdkAuthenticationSignature"},ie:1}};const o={init:function(t){void 0===t&&void 0!==o.zg||(o.zg=!!t),o.t||(o.t=!0)},destroy:function(){o.t=!1,o.zg=void 0,o.j=void 0},setLogger:function(t){"function"==typeof t?(o.init(),o.j=t):o.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){o.init(),o.zg?(console.log("Disabling Braze logging"),o.zg=!1):(console.log("Enabled Braze logging"),o.zg=!0)},info:function(t){if(o.zg){const e="Braze: "+t;null!=o.j?o.j(e):console.log(e)}},warn:function(t){if(o.zg){const e="Braze SDK Warning: "+t+" (v4.9.0)";null!=o.j?o.j(e):console.warn(e)}},error:function(t){if(o.zg){const e="Braze SDK Error: "+t+" (v4.9.0)";null!=o.j?o.j(e):console.error(e)}}},a=o,l={On:i,q:{CustomEvent:"ce",Pr:"p",$u:"pc",dc:"ca",Va:"i",qs:"ie",P:"cci",T:"ccic",$:"ccc",H:"ccd",Wl:"ss",xl:"se",Vi:"si",Li:"sc",Qi:"sbc",Ki:"sfe",eo:"iec",Su:"lr",ju:"uae",R:"ci",B:"cc",Au:"lcaa",qu:"lcar",Xn:"inc",Jn:"add",Qn:"rem",Hn:"set",Kn:"ncam",Cu:"sgu",Fr:"ffi"},Cr:{Br:"feed_displayed",vc:"content_cards_displayed"},Z:n,xt:r,zt:r.ep,j:a,Jo:{ho:"allowCrawlerActivity",Eo:"baseUrl",_o:"noCookies",Io:"devicePropertyAllowlist",Aa:"disablePushTokenMaintenance",Ao:"enableLogging",So:"enableSdkAuthentication",qa:"manageServiceWorkerExternally",No:"minimumIntervalBetweenTriggerActionsInSeconds",wo:"sessionTimeoutInSeconds",Oo:"appVersion",_a:"serviceWorkerLocation",ka:"safariWebsitePushId",Ba:"localization",po:"contentSecurityNonce",Co:"enableHtmlInAppMessages",Lo:"allowUserSuppliedJavascript",lo:"inAppMessageZIndex",fo:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",mh:"requireExplicitInAppMessageDismissal",Po:"doNotLoadFontAwesome",Ro:"sdkFlavor",tn:"openCardsInNewTab"}}},77529:(t,e,s)=>{s.d(e,{Z:()=>h});var i=s(85563),n=s(39179),r=s(24673),o=s(52367),a=s(45966);class l{constructor(t){this.u=t,this.u=t}h(t,e){const s=new r.Z;if(t.p(),null==t.url||""===t.url)return o.Z.j.info(`Card ${t.id} has no url. Not logging click to Braze servers.`),s;if(e&&t.id&&this.u){const e=this.u.v(a.I.k.C)||{};e[t.id]=!0,this.u.D(a.I.k.C,e)}const i=this.I([t]);if(null==i)return s;const l=e?o.Z.q.$:o.Z.q.B;return n.Z.N(l,i)}A(t){const e=new r.Z;if(!t.F())return o.Z.j.info(`Card ${t.id} refused this dismissal. Ignoring analytics event.`),e;if(t.id&&this.u){const e=this.u.v(a.I.k.G)||{};e[t.id]=!0,this.u.D(a.I.k.G,e)}const s=this.I([t]);return null==s?e:n.Z.N(o.Z.q.H,s)}J(t,e){const s=new r.Z(!0),l=[],u=[];let c={};this.u&&(c=e?this.u.v(a.I.k.K)||{}:this.u.v(a.I.k.L)||{});for(const e of t)e.M(),e instanceof i.Z?u.push(e):l.push(e),e.id&&(c[e.id]=!0);const h=this.I(l),d=this.I(u);if(null==h&&null==d)return s.O=!1,s;if(this.u&&(e?this.u.D(a.I.k.K,c):this.u.D(a.I.k.L,c)),null!=h){const t=e?o.Z.q.P:o.Z.q.R,i=n.Z.N(t,h);s.S(i)}if(null!=d&&e){const t=n.Z.N(o.Z.q.T,d);s.S(t)}return s}I(t){let e,s=null;for(let i=0;i<t.length;i++)e=t[i].id,null!=e&&""!==e&&(s=s||{},s.ids=s.ids||[],s.ids.push(e));return s}}var u=s(59463);const c={t:!1,i:null,m:()=>(c.o(),c.i||(c.i=new l(u.ZP.l())),c.i),o:()=>{c.t||(u.ZP.g(c),c.t=!0)},destroy:()=>{c.i=null,c.t=!1}},h=c},35608:(t,e,s)=>{s.d(e,{ql:()=>l,Ji:()=>u,rW:()=>c,Zw:()=>h,pq:()=>d,sv:()=>f,CG:()=>p,Dj:()=>g});var i=s(5242),n=s(11507),r=s(40420),o=s(22080),a=s(52367);function l(t){return null!=t&&!!t.getAttribute("data-ab-had-top-impression")}function u(t){null!=t&&t.setAttribute("data-ab-had-top-impression","true")}function c(t){return null!=t&&!!t.getAttribute("data-ab-had-bottom-impression")}function h(t){null!=t&&t.setAttribute("data-ab-had-bottom-impression","true")}function d(t){if(null!=t){const e=t.querySelectorAll(".ab-unread-indicator")[0];null!=e&&(e.className+=" read")}}function f(t){return t.getAttribute("data-ab-card-id")}function p(t,e){const s=e.querySelectorAll(".ab-image-area");let i,n=0;s.length>0&&(n=s[0].offsetWidth);for(const e of t)if(i=e._,i&&e.imageUrl&&"number"==typeof e.aspectRatio){const t=n/e.aspectRatio;t&&(i.style.height=`${t}px`)}}function g(t,e,s){const l=document.createElement("div");l.className="ab-card ab-effect-card "+t.U,t.id&&(l.setAttribute("data-ab-card-id",t.id),l.setAttribute("id",t.id)),l.setAttribute("role","article"),l.setAttribute("tabindex","0");let u="",c=!1;t.url&&""!==t.url&&(u=t.url,c=!0);const h=i=>(d(l),c&&(e(t),(0,r.S)(u,s,i)),!1);if(t.pinned){const t=document.createElement("div");t.className="ab-pinned-indicator";const e=document.createElement("i");e.className="fa fa-star",t.appendChild(e),l.appendChild(t)}if(t.imageUrl&&""!==t.imageUrl){const e=document.createElement("div");e.className="ab-image-area";const s=document.createElement("img");if(s.setAttribute("src",t.imageUrl),s.onload=()=>{l.style.height="auto"},function(t,e){let s="";t.title||t.description||(s="Feed Image"),e.setAttribute("alt",s)}(t,s),e.appendChild(s),l.className+=" with-image",c&&!t.V){const t=document.createElement("a");t.setAttribute("href",u),t.onclick=h,t.appendChild(e),l.appendChild(t)}else l.appendChild(e)}const f=document.createElement("div");if(f.className="ab-card-body",t.dismissible){t.logCardDismissal=()=>(0,o.K)(t);const e=(0,i.B)("Dismiss Card",void 0,t.dismissCard.bind(t));l.appendChild(e),(0,n.FZ)(f,n.mQ.W,(t=>{l.className+=" ab-swiped-left",e.onclick(t)})),(0,n.FZ)(f,n.mQ.X,(t=>{l.className+=" ab-swiped-right",e.onclick(t)}))}let p="",g=!1;if(t.title&&""!==t.title&&(p=t.title,g=!0),g){const t=document.createElement("h1");if(t.className="ab-title",t.id=a.Z.Z.Y(),l.setAttribute("aria-labelledby",t.id),c){const e=document.createElement("a");e.setAttribute("href",u),e.onclick=h,e.appendChild(document.createTextNode(p)),t.appendChild(e)}else t.appendChild(document.createTextNode(p));f.appendChild(t)}const m=document.createElement("div");if(m.className=g?"ab-description":"ab-description ab-no-title",m.id=a.Z.Z.Y(),l.setAttribute("aria-describedby",m.id),t.description&&m.appendChild(document.createTextNode(t.description)),c){const e=document.createElement("div");e.className="ab-url-area";const s=document.createElement("a");s.setAttribute("href",u),t.linkText&&s.appendChild(document.createTextNode(t.linkText)),s.onclick=h,e.appendChild(s),m.appendChild(e)}f.appendChild(m),l.appendChild(f);const Z=document.createElement("div");return Z.className="ab-unread-indicator",t.viewed&&(Z.className+=" read"),l.appendChild(Z),t._=l,l}},1280:(t,e,s)=>{s.d(e,{d:()=>l});var i=s(72857),n=s(77529),r=s(27671),o=s(59463),a=s(52367);function l(t,e){return!!o.ZP.rr()&&(t instanceof i.Z?n.Z.m().h(t,e).O:(a.Z.j.error("card "+r.U4),!1))}},22080:(t,e,s)=>{s.d(e,{K:()=>l});var i=s(72857),n=s(77529),r=s(27671),o=s(59463),a=s(52367);function l(t){return!!o.ZP.rr()&&(t instanceof i.Z?n.Z.m().A(t).O:(a.Z.j.error("card "+r.U4),!1))}},11066:(t,e,s)=>{s.d(e,{p:()=>u});var i=s(72857),n=s(77529),r=s(59463),o=s(72893),a=s(27671),l=s(52367);function u(t,e){if(!r.ZP.rr())return!1;if(!(0,o.kJ)(t))return l.Z.j.error("cards must be an array"),!1;for(const e of t)if(!(e instanceof i.Z))return l.Z.j.error(`Each card in cards ${a.U4}`),!1;return n.Z.m().J(t,e).O}},17283:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(72857);class n extends i.Z{constructor(t,e,s,i,n,r,o,a,l,u,c,h,d,f){super(t,e,null,s,null,i,n,r,o,a,l,u,c,h,d,f),this.U="ab-banner ab-image-only",this.V=!1,this.test=!1}ss(){const t={};return t[i.Z.hs.ts]=i.Z.es.rs,t[i.Z.hs.ns]=this.id,t[i.Z.hs.ls]=this.viewed,t[i.Z.hs.os]=this.imageUrl,t[i.Z.hs.us]=this.updated,t[i.Z.hs.cs]=this.created,t[i.Z.hs.bs]=this.categories,t[i.Z.hs.ds]=this.expiresAt,t[i.Z.hs.URL]=this.url,t[i.Z.hs.ps]=this.linkText,t[i.Z.hs.fs]=this.aspectRatio,t[i.Z.hs.xs]=this.extras,t[i.Z.hs.gs]=this.pinned,t[i.Z.hs.js]=this.dismissible,t[i.Z.hs.ys]=this.clicked,t[i.Z.hs.zs]=this.test,t}}},5383:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(72857);class n extends i.Z{constructor(t,e,s,i,n,r,o,a,l,u,c,h,d,f,p,g){super(t,e,s,i,n,r,o,a,l,u,c,h,d,f,p,g),this.U="ab-captioned-image",this.V=!0,this.test=!1}ss(){const t={};return t[i.Z.hs.ts]=i.Z.es.tt,t[i.Z.hs.ns]=this.id,t[i.Z.hs.ls]=this.viewed,t[i.Z.hs.st]=this.title,t[i.Z.hs.os]=this.imageUrl,t[i.Z.hs.it]=this.description,t[i.Z.hs.us]=this.updated,t[i.Z.hs.cs]=this.created,t[i.Z.hs.bs]=this.categories,t[i.Z.hs.ds]=this.expiresAt,t[i.Z.hs.URL]=this.url,t[i.Z.hs.ps]=this.linkText,t[i.Z.hs.fs]=this.aspectRatio,t[i.Z.hs.xs]=this.extras,t[i.Z.hs.gs]=this.pinned,t[i.Z.hs.js]=this.dismissible,t[i.Z.hs.ys]=this.clicked,t[i.Z.hs.zs]=this.test,t}}},72857:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(57750),n=s(27671),r=s(74663);class o{constructor(t,e,s,i,n,r,o,a,l,u,c,h,d,f,p,g){this.id=t,this.viewed=e,this.title=s,this.imageUrl=i,this.description=n,this.created=r,this.updated=o,this.categories=a,this.expiresAt=l,this.url=u,this.linkText=c,this.aspectRatio=h,this.extras=d,this.pinned=f,this.dismissible=p,this.clicked=g,this.id=t,this.viewed=e||!1,this.title=s||"",this.imageUrl=i,this.description=n||"",this.created=r||null,this.updated=o||null,this.categories=a||[],this.expiresAt=l||null,this.url=u,this.linkText=c,null==h?this.aspectRatio=null:(h=parseFloat(h.toString()),this.aspectRatio=isNaN(h)?null:h),this.extras=d||{},this.pinned=f||!1,this.dismissible=p||!1,this.dismissed=!1,this.clicked=g||!1,this.isControl=!1,this.test=!1,this.ht=null,this.nt=null}subscribeToClickedEvent(t){return this.et().lt(t)}subscribeToDismissedEvent(t){return this.rt().lt(t)}removeSubscription(t){this.et().removeSubscription(t),this.rt().removeSubscription(t)}removeAllSubscriptions(){this.et().removeAllSubscriptions(),this.rt().removeAllSubscriptions()}dismissCard(){if(!this.dismissible||this.dismissed)return;"function"==typeof this.logCardDismissal&&this.logCardDismissal();let t=this._;!t&&this.id&&(t=document.getElementById(this.id)),t&&(t.style.height=t.offsetHeight+"px",t.className=t.className+" ab-hide",setTimeout((function(){t&&t.parentNode&&(t.style.height="0",t.style.margin="0",setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),o.ut))}),n.rF))}et(){return null==this.ht&&(this.ht=new r.Z),this.ht}rt(){return null==this.nt&&(this.nt=new r.Z),this.nt}M(){this.viewed=!0}p(){this.viewed=!0,this.clicked=!0,this.et().Et()}F(){return!(!this.dismissible||this.dismissed||(this.dismissed=!0,this.rt().Et(),0))}ot(t){if(null==t||t[o.Tt.ns]!==this.id)return!0;if(t[o.Tt.It])return!1;if(null!=t[o.Tt.us]&&null!=this.updated&&parseInt(t[o.Tt.us])<(0,i.FX)(this.updated.valueOf()))return!0;if(t[o.Tt.ls]&&!this.viewed&&(this.viewed=!0),t[o.Tt.ys]&&!this.clicked&&(this.clicked=t[o.Tt.ys]),null!=t[o.Tt.st]&&(this.title=t[o.Tt.st]),null!=t[o.Tt.os]&&(this.imageUrl=t[o.Tt.os]),null!=t[o.Tt.it]&&(this.description=t[o.Tt.it]),null!=t[o.Tt.us]){const e=(0,i.X2)(t[o.Tt.us]);null!=e&&(this.updated=e)}if(null!=t[o.Tt.ds]){let e;e=t[o.Tt.ds]===o.Nt?null:(0,i.X2)(t[o.Tt.ds]),this.expiresAt=e}if(null!=t[o.Tt.URL]&&(this.url=t[o.Tt.URL]),null!=t[o.Tt.ps]&&(this.linkText=t[o.Tt.ps]),null!=t[o.Tt.fs]){const e=parseFloat(t[o.Tt.fs].toString());this.aspectRatio=isNaN(e)?null:e}return null!=t[o.Tt.xs]&&(this.extras=t[o.Tt.xs]),null!=t[o.Tt.gs]&&(this.pinned=t[o.Tt.gs]),null!=t[o.Tt.js]&&(this.dismissible=t[o.Tt.js]),null!=t[o.Tt.zs]&&(this.test=t[o.Tt.zs]),!0}ss(){throw new Error("Must be implemented in a subclass")}}o.Nt=-1,o.Tt={ns:"id",ls:"v",js:"db",It:"r",us:"ca",gs:"p",ds:"ea",xs:"e",ts:"tp",os:"i",st:"tt",it:"ds",URL:"u",ps:"dm",fs:"ar",ys:"cl",zs:"t"},o.es={tt:"captioned_image",ct:"text_announcement",St:"short_news",rs:"banner_image",At:"control"},o.hs={ns:"id",ls:"v",js:"db",cs:"cr",us:"ca",gs:"p",bs:"t",ds:"ea",xs:"e",ts:"tp",os:"i",st:"tt",it:"ds",URL:"u",ps:"dm",fs:"ar",ys:"cl",zs:"s"},o.Dt={dt:"ADVERTISING",Ct:"ANNOUNCEMENTS",Rt:"NEWS",bt:"SOCIAL"},o.ut=400},37653:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(72857);class n extends i.Z{constructor(t,e,s,i,n,r,o,a,l,u,c,h,d,f,p,g){super(t,e,s,i,n,r,o,a,l,u,c,h,d,f,p,g),this.U="ab-classic-card",this.V=!0}ss(){const t={};return t[i.Z.hs.ts]=i.Z.es.St,t[i.Z.hs.ns]=this.id,t[i.Z.hs.ls]=this.viewed,t[i.Z.hs.st]=this.title,t[i.Z.hs.os]=this.imageUrl,t[i.Z.hs.it]=this.description,t[i.Z.hs.us]=this.updated,t[i.Z.hs.cs]=this.created,t[i.Z.hs.bs]=this.categories,t[i.Z.hs.ds]=this.expiresAt,t[i.Z.hs.URL]=this.url,t[i.Z.hs.ps]=this.linkText,t[i.Z.hs.fs]=this.aspectRatio,t[i.Z.hs.xs]=this.extras,t[i.Z.hs.gs]=this.pinned,t[i.Z.hs.js]=this.dismissible,t[i.Z.hs.ys]=this.clicked,t[i.Z.hs.zs]=this.test,t}}},85563:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(72857);class n extends i.Z{constructor(t,e,s,i,n,r){super(t,e,null,null,null,null,s,null,i,null,null,null,n,r),this.isControl=!0,this.U="ab-control-card",this.V=!1}ss(){const t={};return t[i.Z.hs.ts]=i.Z.es.At,t[i.Z.hs.ns]=this.id,t[i.Z.hs.ls]=this.viewed,t[i.Z.hs.us]=this.updated,t[i.Z.hs.ds]=this.expiresAt,t[i.Z.hs.xs]=this.extras,t[i.Z.hs.gs]=this.pinned,t[i.Z.hs.zs]=this.test,t}}},8378:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(72857),n=s(17283);class r extends n.Z{constructor(t,e,s,i,n,r,o,a,l,u,c,h,d,f){super(t,e,s,i,n,r,o,a,l,u,c,h,d,f),this.U="ab-banner ab-image-only",this.V=!1,this.test=!1}ss(){const t={};return t[i.Z.hs.ts]=i.Z.es.rs,t[i.Z.hs.ns]=this.id,t[i.Z.hs.ls]=this.viewed,t[i.Z.hs.os]=this.imageUrl,t[i.Z.hs.us]=this.updated,t[i.Z.hs.cs]=this.created,t[i.Z.hs.bs]=this.categories,t[i.Z.hs.ds]=this.expiresAt,t[i.Z.hs.URL]=this.url,t[i.Z.hs.ps]=this.linkText,t[i.Z.hs.fs]=this.aspectRatio,t[i.Z.hs.xs]=this.extras,t[i.Z.hs.gs]=this.pinned,t[i.Z.hs.js]=this.dismissible,t[i.Z.hs.ys]=this.clicked,t[i.Z.hs.zs]=this.test,t}}},23756:(t,e,s)=>{s.d(e,{xA:()=>h,D5:()=>d,rN:()=>f});var i=s(72857),n=s(37653),r=s(5383),o=s(8378),a=s(85563),l=s(57750),u=s(52367);function c(t,e,s,l,c,h,d,f,p,g,m,Z,b,v,y,S,A,E){let C;if(e===i.Z.es.ct||e===i.Z.es.St)C=new n.Z(t,s,l,c,h,d,f,p,g,m,Z,b,v,y,S,A);else if(e===i.Z.es.tt)C=new r.Z(t,s,l,c,h,d,f,p,g,m,Z,b,v,y,S,A);else if(e===i.Z.es.rs)C=new o.Z(t,s,c,d,f,p,g,m,Z,b,v,y,S,A);else{if(e!==i.Z.es.At)return u.Z.j.error("Ignoring card with unknown type "+e),null;C=new a.Z(t,s,f,g,v,y)}return E&&(C.test=E),C}function h(t){if(t[i.Z.Tt.It])return null;const e=t[i.Z.Tt.ns],s=t[i.Z.Tt.ts],n=t[i.Z.Tt.ls],r=t[i.Z.Tt.st],o=t[i.Z.Tt.os],a=t[i.Z.Tt.it],u=(0,l.X2)(t[i.Z.Tt.us]),h=u;let d;return d=t[i.Z.Tt.ds]===i.Z.Nt?null:(0,l.X2)(t[i.Z.Tt.ds]),c(e,s,n,r,o,a,h,u,null,d,t[i.Z.Tt.URL],t[i.Z.Tt.ps],t[i.Z.Tt.fs],t[i.Z.Tt.xs],t[i.Z.Tt.gs],t[i.Z.Tt.js],t[i.Z.Tt.ys],t[i.Z.Tt.zs]||!1)}function d(t){return c(t.id,t.type,t.viewed,t.title,t.image,t.description,(0,l.X2)(t.created),(0,l.X2)(t.updated),t.categories,(0,l.X2)(t.expires_at),t.url,t.domain,t.aspect_ratio,t.extras,!1,!1)}function f(t){return c(t[i.Z.hs.ns],t[i.Z.hs.ts],t[i.Z.hs.ls],t[i.Z.hs.st],t[i.Z.hs.os],t[i.Z.hs.it],(0,l.Rd)(t[i.Z.hs.cs]),(0,l.Rd)(t[i.Z.hs.us]),t[i.Z.hs.bs],(0,l.Rd)(t[i.Z.hs.ds]),t[i.Z.hs.URL],t[i.Z.hs.ps],t[i.Z.hs.fs],t[i.Z.hs.xs],t[i.Z.hs.gs],t[i.Z.hs.js],t[i.Z.hs.ys],t[i.Z.hs.zs]||!1)||void 0}},34790:(t,e,s)=>{s.r(e),s.d(e,{changeUser:()=>l});var i=s(59463),n=s(8548),r=s(52367),o=s(17615),a=s(3905);function l(t,e){if(!i.ZP.rr())return;if(null==t||0===t.length||t!=t)return void r.Z.j.error("changeUser requires a non-empty userId.");if((0,n.E)(t)>o.Z.lr)return void r.Z.j.error(`Rejected user id "${t}" because it is longer than ${o.Z.lr} bytes.`);if(null!=e&&!(0,a.ro)(e,"set signature for new user","signature"))return;const s=i.ZP.cr();s&&s.changeUser(t.toString(),i.ZP.gr(),e)}},12017:(t,e,s)=>{s.d(e,{Z:()=>i});const i={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"}},46243:(t,e,s)=>{s.d(e,{P:()=>n});var i=s(59463);function n(){if(i.ZP.rr())return i.ZP.br()}},40420:(t,e,s)=>{s.d(e,{S:()=>d,h:()=>f});var i=s(52367),n=s(27671),r=s(59463),o=s(73046),a=s(73695),l=s(35806),u=s(3905),c=s(75319),h=s(46243);function d(t,e,d){if(r.ZP.rr())if(u.y9.test(t)){const e=(0,o.OL)(t);if(!e)return;const d=t=>{if(!(0,u.zR)(t))return void i.Z.j.error(`Decoded Braze Action json is invalid: ${JSON.stringify(t,null,2)}`);const e=o.A9.properties.type,f=o.A9.properties.me,p=o.A9.properties.le,g=t[e];if(g===o.A9.types.ue){const e=t[f];for(const t of e)d(t)}else{const e=t[p];let u,d;switch(g){case o.A9.types.logCustomEvent:Promise.resolve().then(s.bind(s,61454)).then((({logCustomEvent:t})=>{r.ZP.fe()?(d=Array.prototype.slice.call(e),t(...d)):i.Z.j.error(n.Go)}));break;case o.A9.types.requestPushPermission:Promise.resolve().then(s.bind(s,12261)).then((({requestPushPermission:t})=>{r.ZP.fe()?"Safari"===a.Z.browser&&a.Z.OS===l.T.de?window.navigator.standalone&&t():t():i.Z.j.error(n.Go)}));break;case o.A9.types.setEmailNotificationSubscriptionType:case o.A9.types.setPushNotificationSubscriptionType:case o.A9.types.setCustomUserAttribute:case o.A9.types.addToSubscriptionGroup:case o.A9.types.removeFromSubscriptionGroup:case o.A9.types.addToCustomAttributeArray:case o.A9.types.removeFromCustomAttributeArray:u=(0,h.P)(),u&&u[g](...Array.prototype.slice.call(e));break;case o.A9.types.pe:case o.A9.types.je:d=Array.prototype.slice.call(e),c.SD.openUri(...d);break;default:i.Z.j.info(`Ignoring unknown Braze Action: ${g}`)}}};d(e)}else c.SD.openUri(t,e,d)}function f(t,e){d(t,e)}},61454:(t,e,s)=>{s.r(e),s.d(e,{logCustomEvent:()=>c});var i=s(59463),n=s(39179),r=s(52367),o=s(24365),a=s(22385),l=s(3905),u=s(27671);function c(t,e){if(!i.ZP.rr())return!1;if(null==t||t.length<=0)return r.Z.j.error(`logCustomEvent requires a non-empty eventName, got "${t}". Ignoring event.`),!1;if(!(0,l.zM)(t,"log custom event","the event name"))return!1;const[s,c]=(0,l.lg)(e,u._P,"eventProperties",`log custom event "${t}"`,"event");if(!s)return!1;const h=i.ZP.tr();if(h&&h.ge(t))return r.Z.j.info(`Custom Event "${t}" is blocklisted, ignoring.`),!1;const d=n.Z.N(r.Z.q.CustomEvent,{n:t,p:c});if(d.O){r.Z.j.info(`Logged custom event "${t}".`);for(const s of d.ve)a.n.er().be(o.Z.$e,[t,e],s)}return d.O}},61364:(t,e,s)=>{s.r(e),s.d(e,{logPurchase:()=>c});var i=s(59463),n=s(27671),r=s(52367),o=s(24365),a=s(22385),l=s(3905),u=s(39179);function c(t,e,s,c,h){if(!i.ZP.rr())return!1;if(null==s&&(s="USD"),null==c&&(c=1),null==t||t.length<=0)return r.Z.j.error(`logPurchase requires a non-empty productId, got "${t}", ignoring.`),!1;if(!(0,l.zM)(t,"log purchase","the purchase name"))return!1;if(null==e||isNaN(parseFloat(e.toString())))return r.Z.j.error(`logPurchase requires a numeric price, got ${e}, ignoring.`),!1;const d=parseFloat(e.toString()).toFixed(2);if(null==c||isNaN(parseInt(c.toString())))return r.Z.j.error(`logPurchase requires an integer quantity, got ${c}, ignoring.`),!1;const f=parseInt(c.toString());if(f<1||f>n.Fz)return r.Z.j.error(`logPurchase requires a quantity >1 and <${n.Fz}, got ${f}, ignoring.`),!1;if(s=null!=s?s.toUpperCase():s,-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(s))return r.Z.j.error(`logPurchase requires a valid currencyCode, got ${s}, ignoring.`),!1;const[p,g]=(0,l.lg)(h,"logPurchase","purchaseProperties",`log purchase "${t}"`,"purchase");if(!p)return!1;const m=i.ZP.tr();if(m&&m.Dr(t))return r.Z.j.info(`Purchase "${t}" is blocklisted, ignoring.`),!1;const Z=u.Z.N(r.Z.q.Pr,{pid:t,c:s,p:d,q:f,pr:g});if(Z.O){r.Z.j.info(`Logged ${f} purchase${f>1?"s":""} of "${t}" for ${s} ${d}.`);for(const e of Z.ve)a.n.er().be(o.Z.Rr,[t,h],e)}return Z.O}},18503:(t,e,s)=>{s.d(e,{A:()=>n});var i=s(59463);function n(t){i.ZP.rr()&&i.ZP.removeSubscription(t)}},64650:(t,e,s)=>{s.r(e),s.d(e,{requestImmediateDataFlush:()=>n});var i=s(59463);function n(t){if(!i.ZP.rr())return;const e=i.ZP.cr();e&&e.requestImmediateDataFlush(t)}},12962:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(52367);class n{constructor(t,e=!1,s={},i){this.id=t,this.enabled=e,this.properties=s,this.trackingString=i,this.id=t,this.enabled=e,this.properties=s,this.trackingString=i}getStringProperty(t){const e=this.properties[t];return null==e?(this.Er(t),null):this.Ir(e)?e.value:(this.Nr("string"),null)}getNumberProperty(t){const e=this.properties[t];return null==e?(this.Er(t),null):this.Tr(e)?e.value:(this.Nr("number"),null)}getBooleanProperty(t){const e=this.properties[t];return null==e?(this.Er(t),null):this.Ar(e)?e.value:(this.Nr("boolean"),null)}ss(){const t={};return t[n.hs.ns]=this.id,t[n.hs.Fe]=this.enabled,t[n.hs.we]=this.properties,t[n.hs.ze]=this.trackingString,t}Nr(t){i.Z.j.info(`Property is not of type ${t}.`)}Er(t){i.Z.j.info(`${t} not found in feature flag properties.`)}Ir(t){return"string"===t.type&&"string"==typeof t.value}Tr(t){return"number"===t.type&&"number"==typeof t.value}Ar(t){return"boolean"===t.type&&"boolean"==typeof t.value}}n.hs={ns:"id",Fe:"e",we:"pr",ze:"fts"},n.Tt={ns:"id",Fe:"enabled",we:"properties",ze:"fts"}},12611:(t,e,s)=>{s.d(e,{Z:()=>m});var i=s(59463),n=s(52367),r=s(40158),o=s(45966),a=s(74663),l=s(96504),u=s(41843),c=s(12962);function h(t){if(t[c.Z.Tt.ns]&&"boolean"==typeof t[c.Z.Tt.Fe])return new c.Z(t[c.Z.Tt.ns],t[c.Z.Tt.Fe],t[c.Z.Tt.we],t[c.Z.Tt.ze]);n.Z.j.info(`Unable to create feature flag from ${JSON.stringify(t,null,2)}`)}function d(t){if(t[c.Z.hs.ns]&&"boolean"==typeof t[c.Z.hs.Fe])return new c.Z(t[c.Z.hs.ns],t[c.Z.hs.Fe],t[c.Z.hs.we],t[c.Z.hs.ze]);n.Z.j.info(`Unable to deserialize feature flag from ${JSON.stringify(t,null,2)}`)}var f=s(76870);class p extends r.Z{constructor(t,e,s){super(),this.wt=t,this.gt=e,this.u=s,this.pi=[],this.gi=0,this.wt=t,this.gt=e,this.u=s,this.Fi=null,this.wi=new a.Z,this.yi=10,this.ji=null,this.bi=null,i.ZP.jt(this.wi)}Ts(t){if((!this.wt||this.wt.vi())&&null!=t&&t.feature_flags){this.pi=[];for(const e of t.feature_flags){const t=h(e);t&&this.pi.push(t)}this.gi=(new Date).getTime(),this.Ti(),this.wi.Et(this.pi)}}Di(){let t={};this.u&&(t=this.u.v(o.I.k.Ri));const e={};for(const s in t){const i=d(t[s]);i&&(e[i.id]=i)}return e}Ni(){var t;return(null===(t=this.u)||void 0===t?void 0:t.v(o.I.k.qi))||{}}xi(t){this.u&&this.u.D(o.I.k.qi,t)}ri(t){return this.wi.lt(t)}refreshFeatureFlags(t,e,s=!1,i=!0){if(!this.zi(s))return!this.Fi&&this.wt&&(this.Fi=this.wt.Ci((()=>{this.refreshFeatureFlags(t,e)}))),void("function"==typeof e&&e());if(i&&this.Ii(),!this.gt)return void("function"==typeof e&&e());const n=this.gt.Bs({},!0),r=this.gt.Hs(n,f.Z.Os.Si);let o=!1;this.gt.Qs(n,(()=>{this.gt?(f.Z.Ws(this.u,f.Z.Os.Si,(new Date).valueOf()),u.Z.Xs({url:`${this.gt.Ys()}/feature_flags/sync`,headers:r,data:n,O:s=>{if(!this.gt.Zs(n,s,r))return o=!0,void("function"==typeof e&&e());this.gt.ti(),this.Ts(s),o=!1,f.Z.si(this.u,f.Z.Os.Si,1),"function"==typeof t&&t()},error:t=>{this.gt.ii(t,"retrieving feature flags"),o=!0,"function"==typeof e&&e()},ei:()=>{if(i&&o&&!this.bi){f.Z.hi(this.u,f.Z.Os.Si);let i=this.ji;(null==i||i<1e3*this.yi)&&(i=1e3*this.yi),this.$i(Math.min(3e5,(0,l.R)(1e3*this.yi,3*i)),t,e,s)}}})):"function"==typeof e&&e()}))}Ii(){null!=this.bi&&(clearTimeout(this.bi),this.bi=null)}$i(t=1e3*this.yi,e,s,i=!1){this.Ii(),this.bi=window.setTimeout((()=>{this.refreshFeatureFlags(e,s,i)}),t),this.ji=t}zi(t){if(!this.wt)return!1;if(!t){const t=this.wt.Mi();if(null==t)return!1;let e=!1;if(!isNaN(t)){if(-1===t)return n.Z.j.info("Feature flag refreshes not allowed"),!1;e=(new Date).getTime()>=(this.gi||0)+1e3*t}if(!e)return n.Z.j.info(`Feature flag refreshes were rate limited to ${t} seconds`),!1}return this.wt.vi()}Ti(){if(!this.u)return;const t={};for(const e of this.pi){const s=e.ss();t[e.id]=s}this.u.D(o.I.k.Ri,t),this.u.D(o.I.k.Ui,this.gi)}}const g={t:!1,provider:null,er:()=>(g.o(),g.provider||(g.provider=new p(i.ZP.tr(),i.ZP.ar(),i.ZP.l()),i.ZP.dr(g.provider)),g.provider),o:()=>{g.t||(i.ZP.g(g),g.t=!0)},destroy:()=>{g.provider=null,g.t=!1}},m=g},992:(t,e,s)=>{s.r(e),s.d(e,{refreshFeatureFlags:()=>o,default:()=>a});var i=s(59463),n=s(12611);function r(t,e,s=!1){if(i.ZP.rr())return n.Z.er().refreshFeatureFlags(t,e,s)}function o(t,e){r(t,e)}const a=r},30354:(t,e,s)=>{s.d(e,{Z:()=>d});var i=s(59463),n=s(40158),r=s(83628),o=s(23756),a=s(57750),l=s(45966),u=s(74663);class c extends n.Z{constructor(t,e){super(),this.u=t,this.ki=e,this.cards=[],this.Ai=null,this.u=t,this.ki=e,this.yt=new u.Z,i.ZP.jt(this.yt),this.Lt()}Lt(){let t=[];this.u&&(t=this.u.v(l.I.k.Bi)||[]);const e=[];for(let s=0;s<t.length;s++){const i=(0,o.rN)(t[s]);null!=i&&e.push(i)}this.cards=e,this.u&&(this.Ai=(0,a.Rd)(this.u.v(l.I.k.Ei)))}Gi(t){const e=[];let s=null,i={};this.u&&(i=this.u.v(l.I.k.L)||{});const n={};for(let r=0;r<t.length;r++){s=t[r];const a=(0,o.D5)(s);if(null!=a){const t=a.id;t&&i[t]&&(a.viewed=!0,n[t]=!0),e.push(a)}}this.cards=e,this.Rs(),this.Ai=new Date,this.u&&(this.u.D(l.I.k.L,n),this.u.D(l.I.k.Ei,this.Ai))}Rs(){if(!this.u)return;const t=[];for(let e=0;e<this.cards.length;e++)t.push(this.cards[e].ss());this.u.D(l.I.k.Bi,t)}Ts(t){null!=t&&t.feed&&(this.Lt(),this.Gi(t.feed),this.yt.Et(new r.Z(this.cards.slice(),this.Ai)))}Hi(){this.Lt();const t=[],e=new Date;for(let s=0;s<this.cards.length;s++){const i=this.cards[s].expiresAt;let n=!0;null!=i&&(n=i>=e),n&&t.push(this.cards[s])}return new r.Z(t,this.Ai)}Ms(){this.ki&&this.ki.requestFeedRefresh()}ri(t){return this.yt.lt(t)}clearData(t){null==t&&(t=!1),this.cards=[],this.Ai=null,t&&this.u&&(this.u.ni(l.I.k.Bi),this.u.ni(l.I.k.Ei)),this.yt.Et(new r.Z(this.cards.slice(),this.Ai))}}const h={t:!1,provider:null,er:()=>(h.o(),h.provider||(h.provider=new c(i.ZP.l(),i.ZP.cr()),i.ZP.dr(h.provider)),h.provider),o:()=>{h.t||(i.ZP.g(h),h.t=!0)},destroy:()=>{h.provider=null,h.t=!1}},d=h},83628:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(67),n=s(11066),r=s(1280),o=s(83516);class a extends i.Z{constructor(t,e){super(t,e)}logCardImpressions(t){(0,n.p)(t,!1)}logCardClick(t){return(0,r.d)(t,!1)}sr(){(0,o.a)()}ur(){return!1}}},46599:(t,e,s)=>{s.d(e,{j:()=>r});var i=s(59463),n=s(52367);function r(){if(!i.ZP.rr())return;const t=i.ZP.ar();return t?t.qr(n.Z.Cr.Br).O:void 0}},83516:(t,e,s)=>{s.d(e,{a:()=>r});var i=s(59463),n=s(30354);function r(){if(i.ZP.rr())return n.Z.er().Ms()}},96596:(t,e,s)=>{s.d(e,{n:()=>r});var i=s(59463),n=s(30354);function r(t){if(i.ZP.rr())return n.Z.er().ri(t)}},33545:(t,e,s)=>{s.r(e),s.d(e,{showFeed:()=>f});var i=s(59463),n=s(64095),r=s(83628),o=s(96596),a=s(46599),l=s(30354),u=s(72893),c=s(35608),h=s(46959),d=s(52367);function f(t,e,s){if(!i.ZP.rr())return;(0,h.B)();const f=(t,e)=>{if(null==e)return t;const s=[];for(let t=0;t<e.length;t++)s.push(e[t].toLowerCase());const i=[];for(let e=0;e<t.length;e++){const n=[],r=t[e].categories||[];for(let t=0;t<r.length;t++)n.push(r[t].toLowerCase());(0,u.jV)(n,s).length>0&&i.push(t[e])}return i},p=i.ZP.nn(i.JY.tn)||i.ZP.nn(i.JY.en)||!1;let g=!1;null==t&&(t=document.body,g=!0);let m,Z=!1;null==e?(m=l.Z.er().Hi(),(0,n.Of)(m,f(m.cards,s),m.lastUpdated,null,p),Z=!0):m=new r.Z(f(e,s),new Date);const b=(0,n.Yz)(m,p,g);if(Z){(null==m.lastUpdated||(new Date).valueOf()-m.lastUpdated.valueOf()>r.Z.mr)&&(d.Z.j.info(`Cached feed was older than max TTL of ${r.Z.mr} ms, requesting an update from the server.`),(0,n.cV)(m,b));const t=(new Date).valueOf(),e=(0,o.n)((function(e){const i=b.querySelectorAll(".ab-refresh-button")[0];if(null!=i){let e=500;e-=(new Date).valueOf()-t;const s=b.getAttribute(n.cP);if(s){const t=parseInt(s);isNaN(t)||(e-=(new Date).valueOf()-t)}setTimeout((function(){i.className=i.className.replace(/fa-spin/g,"")}),Math.max(e,0))}(0,n.Of)(m,f(e.cards,s),e.lastUpdated,b,p)}));(0,n.GB)(e,b)}const v=t=>{const e=t.querySelectorAll(".ab-feed");let s=null;for(let i=0;i<e.length;i++)e[i].parentNode===t&&(s=e[i]);null!=s?((0,n.tQ)(s),s.parentNode&&s.parentNode.replaceChild(b,s)):t.appendChild(b),setTimeout((function(){b.className=b.className.replace("ab-hide","ab-show")}),0),g&&b.focus(),(0,a.j)(),(0,n.cz)(m,b),m&&(0,c.CG)(m.cards,t)};var y;null!=t?v(t):window.onload=(y=window.onload,function(){"function"==typeof y&&y(new Event("oldLoad")),v(document.body)})}},23340:(t,e,s)=>{s.d(e,{q:()=>h,V:()=>d});var i=s(1792),n=s(98376),r=s(4410),o=s(31090),a=s(84072),l=s(3811),u=s(26616),c=s(52367);function h(t){if(!t)return null;if(t.is_control)return n.Z.fromJson(t);let e=t.type;null!=e&&(e=e.toUpperCase());const s=t.message,h=t.text_align_message,d=t.slide_from,f=t.extras,p=t.trigger_id,g=t.click_action,m=t.uri,Z=t.open_target,b=t.message_close,v=t.duration,y=t.icon,S=t.image_url,A=t.image_style,E=t.icon_color,C=t.icon_bg_color,N=t.bg_color,T=t.text_color,w=t.close_btn_color,P=t.header,I=t.text_align_header,k=t.header_text_color,D=t.frame_color,_=[];let O=t.btns;null==O&&(O=[]);for(let t=0;t<O.length;t++)_.push(a.Z.fromJson(O[t]));const M=t.crop_type,j=t.orientation,U=t.animate_in,x=t.animate_out;let F,R=t.html_id,L=t.css;if(null!=R&&""!==R&&null!=L&&""!==L||(R=void 0,L=void 0),e===l.Z.es||e===i.Z.qe.Se)F=new l.Z(s,h,f,p,g,m,Z,b,v,y,S,A,E,C,N,T,w,U,x,P,I,k,D,_,M,R,L);else if(e===r.Z.es)F=new r.Z(s,h,f,p,g,m,Z,b,v,y,S,A,E,C,N,T,w,U,x,P,I,k,D,_,M,j,R,L);else if(e===u.Z.es)F=new u.Z(s,h,d,f,p,g,m,Z,b,v,y,S,E,C,N,T,w,U,x,R,L);else{if(e!==o.Z.es&&e!==i.Z.qe.Ee&&e!==i.Z.qe.Ue)return void c.Z.j.error("Ignoring message with unknown type "+e);{const e=t.message_fields;F=new o.Z(s,f,p,b,v,U,x,D,R,L,e),F.trusted=t.trusted||!1}}return F.Pe=e,F}function d(t){const e=[];for(const s of t)e.push(new a.Z(s.text,s.backgroundColor,s.textColor,s.borderColor,s.clickAction,s.uri,s.id));return e}},1087:(t,e,s)=>{s.d(e,{Z:()=>w});var i=s(41843),n=s(59463),r=s(98376),o=s(31090),a=s(1792),l=s(84072),u=s(39179),c=s(23340),h=s(96504),d=s(24673),f=s(52367),p=s(74663),g=s(82246),m=s(72893),Z=s(3905),b=s(73046),v=s(74556),y=s(76870),S=s(45966),A=s(4410),E=s(3811),C=s(26616);class N{constructor(t,e,s,i){this.gt=t,this._e=e,this.u=s,this.ft=i,this.gt=t,this._e=e,this.u=s,this.ft=i,this.Ve=new p.Z,n.ZP.jt(this.Ve),this.We=1e3,this.Xe=6e4,this.Ye=null}Ze(){return this.Ve}_i(t){return this.Ve.lt(t)}Pi(){return this.Ye}Oi(t){this.Ye=t}Ji(t,e){if(!t)return new d.Z;if(!(0,m.fk)(a.Z.Ie,e,`${e} is not a valid in-app message display failure`,"InAppMessage.DisplayFailures"))return new d.Z;const s={trigger_ids:[t],error_code:e};return u.Z.N(f.Z.q.Ki,s)}N(t,e,s,i){const n=new d.Z;let a;if(t instanceof r.Z)a={trigger_ids:[t.triggerId]};else{if(e===f.Z.q.Li||t instanceof o.Z&&e===f.Z.q.Qi){if(!t.p(i))return f.Z.j.info("This in-app message has already received a click. Ignoring analytics event."),n}else if(e===f.Z.q.Vi&&!t.M())return f.Z.j.info("This in-app message has already received an impression. Ignoring analytics event."),n;a=this.Wi(t)}return null==a?n:(null!=s&&(a.bid=s),u.Z.N(e,a))}Xi(t,e){const s=new d.Z;if(!t.p())return f.Z.j.info("This in-app message button has already received a click. Ignoring analytics event."),s;const i=this.Wi(e);return null==i?s:t.id===l.Z.Yi?(f.Z.j.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),s):(null!=t.id&&(i.bid=t.id),u.Z.N(f.Z.q.Qi,i))}Zi(t){const e=t.messageFields;return null!=e&&e.is_push_primer||!1}Mr(t){if(!(t instanceof a.Z))return;const e=t=>{if(!t)return;const e=(0,b.OL)(t);return(0,b.je)(e)?(0,b.Tu)(b.yi._r,"In-App Message"):(0,b.zA)(e)&&!v.Z.Gr()?(0,b.Tu)(b.yi.Or,"In-App Message"):void 0};if(this.Zi(t)&&!v.Z.Gr())return"In-App Message contains a push prompt, but is not eligible for a push prompt. Ignoring.";const s=t.buttons||[];let i;for(const t of s)if(t.clickAction===a.Z.ClickAction.URI&&t.uri&&Z.y9.test(t.uri)&&(i=e(t.uri),i))return i;return t.clickAction===a.Z.ClickAction.URI&&t.uri&&Z.y9.test(t.uri)?e(t.uri):void 0}Hr(t,e,s,n){if(!this.gt)return;const r=this.gt.Jr(!1,!1),o=this.gt.Bs(r);o.template={trigger_id:t.triggerId,trigger_event_type:e},null!=s&&(o.template.data=s.Kr());const l=this.gt.Hs(o,y.Z.Os.Lr);this.gt.Qs(o,(()=>{this.gt&&(y.Z.Ws(this.u,y.Z.Os.Lr,(new Date).valueOf()),i.Z.Xs({url:`${this.gt.Ys()}/template/`,data:o,headers:l,O:e=>{if(y.Z.si(this.u,y.Z.Os.Lr,1),!this.gt.Zs(o,e,l))return this.Ji(t.triggerId,a.Z.Ie.Qr),void("function"==typeof t.Ur&&t.Ur());if(this.gt.ti(),null==e||null==e.templated_message)return void this.Ji(t.triggerId,a.Z.Ie.Qr);const s=e.templated_message;if(s.type!==g.Z.Wr.Vr)return void this.Ji(t.triggerId,a.Z.Ie.Xr);const i=(0,c.q)(s.data);if(null==i)return void this.Ji(t.triggerId,a.Z.Ie.Xr);const n=this.Mr(i);if(n)return f.Z.j.error(n),void("function"==typeof t.Ur&&t.Ur());"function"==typeof t.Yr?t.Yr(i):this.Ji(t.triggerId,a.Z.Ie.Qr)},error:i=>{let r=`getting user personalization for message ${t.triggerId}`;if((new Date).valueOf()-t.Zr>t.sn)this.Ji(t.triggerId,a.Z.Ie.Qr);else{y.Z.hi(this.u,y.Z.Os.Lr);const i=Math.min(t.sn,this.Xe),o=this.We;null==n&&(n=o);const a=Math.min(i,(0,h.R)(o,3*n));r+=`. Retrying in ${a} ms`,setTimeout((()=>{this.Hr(t,e,s,a)}),a)}this.gt.ii(i,r)}}))}))}Wi(t){if(null==t.triggerId)return f.Z.j.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const e={};return null!=t.triggerId&&(e.trigger_ids=[t.triggerId]),e}he(t){return!!this.u&&!(!(t&&t instanceof a.Z&&t.constructor!==a.Z)||t instanceof r.Z)&&this.u.D(S.I.k.rn,t.ss())}Re(){if(!this.u)return null;const t=this.u.v(S.I.k.rn);if(!t)return null;let e;switch(t.type){case a.Z.qe.on:e=A.Z.an(t);break;case a.Z.qe.ln:case a.Z.qe.Ee:case a.Z.qe.Ue:e=o.Z.an(t);break;case a.Z.qe.un:case a.Z.qe.Se:e=E.Z.an(t);break;case a.Z.qe.pn:e=C.Z.an(t)}return e&&this.mn(),e}mn(){this.u&&this.u.ni(S.I.k.rn)}}const T={i:null,t:!1,m:()=>(T.o(),T.i||(T.i=new N(n.ZP.ar(),n.ZP.aa(),n.ZP.l(),n.ZP.ir())),T.i),o:()=>{T.t||(n.ZP.g(T),T.t=!0)},destroy:()=>{T.i=null,T.t=!1}},w=T},98376:(t,e,s)=>{s.d(e,{Z:()=>i});class i{constructor(t){this.triggerId=t,this.triggerId=t,this.extras={},this.isControl=!0}static fromJson(t){return new i(t.trigger_id)}}},4410:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(23340),n=s(1792);class r extends n.Z{constructor(t,e,s,i,r,o,a,l,u,c,h,d,f,p,g,m,Z,b,v,y,S,A,E,C,N,T,w,P){l=l||n.Z.DismissType.MANUAL,T=T||n.Z.Orientation.PORTRAIT,super(t,e,void 0,s,i,r,o,a,l,u,c,h,d,f,p,g,m,Z,b,v,y,S,A,E,C,N=N||n.Z.CropType.CENTER_CROP,T,w,P),this.Te=n.Z.TextAlignment.CENTER}ss(){return super.ss(r.es)}static an(t){return new r(t[n.Z.hs.ea],t[n.Z.hs.ra],t[n.Z.hs.xs],t[n.Z.hs.sa],t[n.Z.hs.ta],t[n.Z.hs.URI],t[n.Z.hs.ia],t[n.Z.hs.oa],t[n.Z.hs.pa],t[n.Z.hs.ma],t[n.Z.hs.os],t[n.Z.hs.na],t[n.Z.hs.ua],t[n.Z.hs.ca],t[n.Z.hs.fa],t[n.Z.hs.da],t[n.Z.hs.la],t[n.Z.hs.ga],t[n.Z.hs.ja],t[n.Z.hs.xa],t[n.Z.hs.za],t[n.Z.hs.ha],t[n.Z.hs.va],(0,i.V)(t[n.Z.hs.wa]),t[n.Z.hs.ya],t[n.Z.hs.Sa],t[n.Z.hs.ba],t[n.Z.hs.CSS])}}r.es=n.Z.qe.on},31090:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(1792);class n extends i.Z{constructor(t,e,s,n,r,o,a,l,u,c,h){super(t,void 0,void 0,e,s,void 0,void 0,void 0,n=n||i.Z.DismissType.MANUAL,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,o,a,void 0,void 0,void 0,l,void 0,void 0,void 0,u,c),this.messageFields=h,this.messageFields=h}io(){return!1}p(t){if(this.Pe===i.Z.qe.ln){if(this.do)return!1;this.do=!0}return this.ht.Et(t),!0}ss(){const t=super.ss(n.es);return t[i.Z.hs.vo]=this.messageFields,t}static an(t){return new n(t[i.Z.hs.ea],t[i.Z.hs.xs],t[i.Z.hs.sa],t[i.Z.hs.oa],t[i.Z.hs.pa],t[i.Z.hs.ga],t[i.Z.hs.ja],t[i.Z.hs.va],t[i.Z.hs.ba],t[i.Z.hs.CSS],t[i.Z.hs.vo])}}n.es=i.Z.qe.ln},84072:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(1792),n=s(74663);class r{constructor(t,e,s,o,a,l,u){this.text=t,this.backgroundColor=e,this.textColor=s,this.borderColor=o,this.clickAction=a,this.uri=l,this.id=u,this.text=t||"",this.backgroundColor=e||i.Z.th.sh,this.textColor=s||i.Z.th.ih,this.borderColor=o||this.backgroundColor,this.clickAction=a||i.Z.ClickAction.NONE,this.uri=l,null==u&&(u=r.Yi),this.id=u,this.do=!1,this.ht=new n.Z}subscribeToClickedEvent(t){return this.ht.lt(t)}removeSubscription(t){this.ht.removeSubscription(t)}removeAllSubscriptions(){this.ht.removeAllSubscriptions()}p(){return!this.do&&(this.do=!0,this.ht.Et(),!0)}static fromJson(t){return new r(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}r.Yi=-1},1792:(t,e,s)=>{s.d(e,{Z:()=>u});var i=s(59463),n=s(73695),r=s(11507),o=s(7429),a=s(74663),l=s(7048);class u{constructor(t,e,s,i,n,r,o,l,c,h,d,f,p,g,m,Z,b,v,y,S,A,E,C,N,T,w,P,I,k){this.message=t,this.messageAlignment=e,this.slideFrom=s,this.extras=i,this.triggerId=n,this.clickAction=r,this.uri=o,this.openTarget=l,this.dismissType=c,this.duration=h,this.icon=d,this.imageUrl=f,this.imageStyle=p,this.iconColor=g,this.iconBackgroundColor=m,this.backgroundColor=Z,this.textColor=b,this.closeButtonColor=v,this.animateIn=y,this.animateOut=S,this.header=A,this.headerAlignment=E,this.headerTextColor=C,this.frameColor=N,this.buttons=T,this.cropType=w,this.orientation=P,this.htmlId=I,this.css=k,this.message=t,this.messageAlignment=e||u.TextAlignment.CENTER,this.duration=h||5e3,this.slideFrom=s||u.SlideFrom.BOTTOM,this.extras=i||{},this.triggerId=n,this.clickAction=r||u.ClickAction.NONE,this.uri=o,this.openTarget=l||u.OpenTarget.NONE,this.dismissType=c||u.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=f,this.imageStyle=p||u.ImageStyle.TOP,this.iconColor=g||u.th.ih,this.iconBackgroundColor=m||u.th.sh,this.backgroundColor=Z||u.th.ih,this.textColor=b||u.th.hh,this.closeButtonColor=v||u.th.eh,this.animateIn=y,null==this.animateIn&&(this.animateIn=!0),this.animateOut=S,null==this.animateOut&&(this.animateOut=!0),this.header=A,this.headerAlignment=E||u.TextAlignment.CENTER,this.headerTextColor=C||u.th.hh,this.frameColor=N||u.th.Eh,this.buttons=T||[],this.cropType=w||u.CropType.FIT_CENTER,this.orientation=P,this.htmlId=I,this.css=k,this.isControl=!1,this.nh=!1,this.Th=!1,this.do=!1,this.oh=!1,this.Me=null,this.ke=null,this.ht=new a.Z,this.rh=new a.Z,this.Te=u.TextAlignment.CENTER}subscribeToClickedEvent(t){return this.ht.lt(t)}subscribeToDismissedEvent(t){return this.rh.lt(t)}removeSubscription(t){this.ht.removeSubscription(t),this.rh.removeSubscription(t)}removeAllSubscriptions(){this.ht.removeAllSubscriptions(),this.rh.removeAllSubscriptions()}closeMessage(){this.ye(this.Me)}xe(){return!0}io(){return this.xe()}Ne(){return null!=this.htmlId&&this.htmlId.length>4}Ae(){return this.Ne()&&null!=this.css&&this.css.length>0}Ce(){if(this.Ne()&&this.Ae())return this.htmlId+"-css"}M(){return!this.Th&&(this.Th=!0,!0)}so(){return this.Th}p(t){return!this.do&&(this.do=!0,this.ht.Et(),!0)}F(){return!this.oh&&(this.oh=!0,this.rh.Et(),!0)}hide(t){if(t&&t.parentNode){let e=t.closest(".ab-iam-root");if(null==e&&(e=t),this.xe()&&null!=e.parentNode){const t=e.parentNode.classList;t&&t.contains(u.lh)&&t.remove(u.lh),document.body.removeEventListener("touchmove",u.uh)}e.className=e.className.replace(u.ah,u.Ih)}return this.animateOut||!1}ye(t,e){if(null==t)return;let s;this.Me=null,s=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t;let i=!1;s&&(i=this.hide(s));const r=document.body;let o;null!=r&&(o=r.scrollTop);const a=()=>{if(t&&t.parentNode){let e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}const s=this.Ce();if(null!=s){const t=document.getElementById(s);t&&t.parentNode&&t.parentNode.removeChild(t)}null!=r&&"Safari"===n.Z.browser&&(r.scrollTop=o),e?e():this.F()};i?setTimeout(a,u.Oh):a(),this.ke&&this.ke.focus()}Ge(){return document.createTextNode(this.message||"")}Be(t){let e="";this.message||this.header||!this.xe()||(e="Modal Image"),t.setAttribute("alt",e)}static uh(t){if(t.targetTouches&&t.targetTouches.length>1)return;const e=t.target;e&&e.classList&&e.classList.contains("ab-message-text")&&e.scrollHeight>e.clientHeight||document.querySelector(`.${u.lh}`)&&t.preventDefault()}Ah(t){const e=t.parentNode;this.xe()&&null!=e&&this.orientation!==u.Orientation.LANDSCAPE&&(null!=e.classList&&e.classList.add(u.lh),document.body.addEventListener("touchmove",u.uh,!!(0,r.QZ)()&&{passive:!1})),t.className+=" "+u.ah}static Lh(t){if(t.keyCode===o.m._h&&!i.ZP.nn(i.JY.mh)&&document.querySelectorAll(".ab-modal-interactions").length>0){const t=document.getElementsByClassName("ab-html-message");let e=!1;for(const s of t){let t=null;(0,l.f)(s)&&s.contentWindow&&(t=s.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=t&&((0,r.$j)(t),e=!0)}if(!e){const t=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=t&&(0,r.$j)(t)}}}Nh(){this.nh||i.ZP.nn(i.JY.mh)||(document.addEventListener("keydown",u.Lh,!1),i.ZP.Rh((()=>{document.removeEventListener("keydown",u.Lh)})),this.nh=!0)}ss(t){const e={};return t?(e[u.hs.ea]=this.message,e[u.hs.ra]=this.messageAlignment,e[u.hs.Sh]=this.slideFrom,e[u.hs.xs]=this.extras,e[u.hs.sa]=this.triggerId,e[u.hs.ta]=this.clickAction,e[u.hs.URI]=this.uri,e[u.hs.ia]=this.openTarget,e[u.hs.oa]=this.dismissType,e[u.hs.pa]=this.duration,e[u.hs.ma]=this.icon,e[u.hs.os]=this.imageUrl,e[u.hs.na]=this.imageStyle,e[u.hs.ua]=this.iconColor,e[u.hs.ca]=this.iconBackgroundColor,e[u.hs.fa]=this.backgroundColor,e[u.hs.da]=this.textColor,e[u.hs.la]=this.closeButtonColor,e[u.hs.ga]=this.animateIn,e[u.hs.ja]=this.animateOut,e[u.hs.xa]=this.header,e[u.hs.za]=this.headerAlignment,e[u.hs.ha]=this.headerTextColor,e[u.hs.va]=this.frameColor,e[u.hs.wa]=this.buttons,e[u.hs.ya]=this.cropType,e[u.hs.Sa]=this.orientation,e[u.hs.ba]=this.htmlId,e[u.hs.CSS]=this.css,e[u.hs.ts]=t,e):e}}u.th={hh:4281545523,ih:4294967295,sh:4278219733,Dh:4293914607,Mh:4283782485,Eh:3224580915,eh:4288387995},u.Ie={Ch:"hd",Le:"ias",dh:"of",Uh:"do",Xr:"umt",Qr:"tf",bh:"te"},u.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},u.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},u.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},u.OpenTarget={NONE:"NONE",BLANK:"BLANK"},u.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},u.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},u.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},u.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},u.qe={pn:"SLIDEUP",un:"MODAL",Se:"MODAL_STYLED",on:"FULL",ln:"WEB_HTML",Ee:"HTML",Ue:"HTML_FULL"},u.Oh=500,u.Ph=200,u.ah="ab-show",u.Ih="ab-hide",u.lh="ab-pause-scrolling",u.hs={ea:"m",ra:"ma",Sh:"sf",xs:"e",sa:"ti",ta:"ca",URI:"u",ia:"oa",oa:"dt",pa:"d",ma:"i",os:"iu",na:"is",ua:"ic",ca:"ibc",fa:"bc",da:"tc",la:"cbc",ga:"ai",ja:"ao",xa:"h",za:"ha",ha:"htc",va:"fc",wa:"b",ya:"ct",Sa:"o",ba:"hi",CSS:"css",ts:"type",vo:"messageFields"}},3811:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(23340),n=s(1792);class r extends n.Z{constructor(t,e,s,i,r,o,a,l,u,c,h,d,f,p,g,m,Z,b,v,y,S,A,E,C,N,T,w){super(t,e,void 0,s,i,r,o,a,l=l||n.Z.DismissType.MANUAL,u,c,h,d,f,p,g,m,Z,b,v,y,S,A,E,C,N=N||n.Z.CropType.FIT_CENTER,void 0,T,w),this.Te=n.Z.TextAlignment.CENTER}ss(){return super.ss(r.es)}static an(t){return new r(t[n.Z.hs.ea],t[n.Z.hs.ra],t[n.Z.hs.xs],t[n.Z.hs.sa],t[n.Z.hs.ta],t[n.Z.hs.URI],t[n.Z.hs.ia],t[n.Z.hs.oa],t[n.Z.hs.pa],t[n.Z.hs.ma],t[n.Z.hs.os],t[n.Z.hs.na],t[n.Z.hs.ua],t[n.Z.hs.ca],t[n.Z.hs.fa],t[n.Z.hs.da],t[n.Z.hs.la],t[n.Z.hs.ga],t[n.Z.hs.ja],t[n.Z.hs.xa],t[n.Z.hs.za],t[n.Z.hs.ha],t[n.Z.hs.va],(0,i.V)(t[n.Z.hs.wa]),t[n.Z.hs.ya],t[n.Z.hs.ba],t[n.Z.hs.CSS])}}r.es=n.Z.qe.un},26616:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(1792),n=s(11507);class r extends i.Z{constructor(t,e,s,n,r,o,a,l,u,c,h,d,f,p,g,m,Z,b,v,y,S){m=m||i.Z.th.Mh,g=g||i.Z.th.Dh,super(t,e=e||i.Z.TextAlignment.START,s,n,r,o,a,l,u,c,h,d,void 0,f,p,g,m,Z,b,v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,y,S),this.Te=i.Z.TextAlignment.START}xe(){return!1}Ge(){const t=document.createElement("span");return t.appendChild(document.createTextNode(this.message||"")),t}Ah(t){const e=t.getElementsByClassName("ab-in-app-message")[0];n.lP.no(e,!0,!0)||(this.slideFrom===i.Z.SlideFrom.TOP?e.style.top="0px":e.style.bottom="0px"),super.Ah(t)}ss(){return super.ss(r.es)}static an(t){return new r(t[i.Z.hs.ea],t[i.Z.hs.ra],t[i.Z.hs.Sh],t[i.Z.hs.xs],t[i.Z.hs.sa],t[i.Z.hs.ta],t[i.Z.hs.URI],t[i.Z.hs.ia],t[i.Z.hs.oa],t[i.Z.hs.pa],t[i.Z.hs.ma],t[i.Z.hs.os],t[i.Z.hs.ua],t[i.Z.hs.ca],t[i.Z.hs.fa],t[i.Z.hs.da],t[i.Z.hs.la],t[i.Z.hs.ga],t[i.Z.hs.ja],t[i.Z.hs.ba],t[i.Z.hs.CSS])}}r.es=i.Z.qe.pn},85724:(t,e,s)=>{s.d(e,{Z:()=>i});class i{constructor(t,e,s,i,n){this.triggerId=t,this.Yr=e,this.Ur=s,this.Zr=i,this.sn=n,this.triggerId=t,this.Yr=e,this.Ur=s,this.Zr=i,this.sn=n}static fromJson(t,e,s,n,r){return null==t||null==t.trigger_id?null:new i(t.trigger_id,e,s,n,r)}}},7048:(t,e,s)=>{s.d(e,{f:()=>i});const i=t=>null!==t&&"IFRAME"===t.tagName},80761:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var i=s(59463),n=s(72893),r=s(63552),o=s(52367),a=s(45966),l=s(17615),u=s(75319),c=s(74556),h=s(8031);class d{constructor(t,e,s,i,n,r,o,a,l,u){this.hn=t,this.cn=e,this.fn=s,this.dn=n,this.bn=r,this.wt=o,this.yn=a,this.gn=l,this.u=u,this.hn=t,this.cn=e,this.fn=s,this.wn=i+"/safari/"+e,this.dn=n||"/service-worker.js",this.bn=r,this.wt=o,this.yn=a||!1,this.gn=l||!1,this.u=u,this.vn=c.Z.kn(),this.Pn=c.Z.Dn()}Sn(){return this.gn}An(t,e,s,i,n){t.unsubscribe().then((t=>{t?this.jn(e,s,i,n):(o.Z.j.error("Failed to unsubscribe device from push."),"function"==typeof n&&n(!1))})).catch((t=>{o.Z.j.error("Push unsubscription error: "+t),"function"==typeof n&&n(!1)}))}Un(t,e,s){const i=(t=>{if("string"==typeof t)return t;if(0!==t.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return t.endpoint;let e=t.endpoint;const s=t;return s.Wn&&-1===t.endpoint.indexOf(s.Wn)&&(e=t.endpoint+"/"+s.Wn),e})(t);let n=null,r=null;const o=t;if(null!=o.getKey)try{const t=Array.from(new Uint8Array(o.getKey("p256dh"))),e=Array.from(new Uint8Array(o.getKey("auth")));n=btoa(String.fromCharCode.apply(null,t)),r=btoa(String.fromCharCode.apply(null,e))}catch(t){if("invalid arguments"!==(0,h.e)(t))throw t}const a=(t=>{let e;return t.options&&(e=t.options.applicationServerKey)&&e.byteLength&&e.byteLength>0?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))).replace(/\+/g,"-").replace(/\//g,"_"):null})(o);this.hn&&this.hn._n(i,e,n,r,a),i&&"function"==typeof s&&s(i,n,r)}xn(){this.hn&&this.hn.Nn(!0)}Tn(t,e){this.hn&&this.hn.Nn(!1),o.Z.j.info(t),"function"==typeof e&&e(!1)}zn(t,e,s,i){var n;if("default"===e.permission)try{window.safari.pushNotification.requestPermission(this.wn,t,{api_key:this.cn,device_id:(null===(n=this.fn)||void 0===n?void 0:n.ce().id)||""},(e=>{"granted"===e.permission&&this.hn&&this.hn.setPushNotificationSubscriptionType(l.Z.NotificationSubscriptionTypes.OPTED_IN),this.zn(t,e,s,i)}))}catch(t){this.Tn("Could not request permission for push: "+t,i)}else"denied"===e.permission?this.Tn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",i):"granted"===e.permission&&(o.Z.j.info("Device successfully subscribed to push."),this.Un(e.deviceToken,new Date,s))}requestPermission(t,e,s){const i=i=>{switch(i){case"granted":return void("function"==typeof t&&t());case"default":return void("function"==typeof e&&e());case"denied":return void("function"==typeof s&&s());default:o.Z.j.error("Received unexpected permission result "+i)}};let n=!1;const r=window.Notification.requestPermission((t=>{n&&i(t)}));r?r.then((t=>{i(t)})):n=!0}jn(t,e,s,i){const n={userVisibleOnly:!0};null!=e&&(n.applicationServerKey=e),t.pushManager.subscribe(n).then((t=>{o.Z.j.info("Device successfully subscribed to push."),this.Un(t,new Date,s)})).catch((t=>{c.Z.isPushBlocked()?(o.Z.j.info("Permission for push notifications was denied."),"function"==typeof i&&i(!1)):(o.Z.j.error("Push subscription failed: "+t),"function"==typeof i&&i(!0))}))}In(){return this.yn?navigator.serviceWorker.getRegistration(this.dn):navigator.serviceWorker.register(this.dn).then((()=>navigator.serviceWorker.ready.then((t=>(t&&"function"==typeof t.update&&t.update().catch((t=>{o.Z.j.info("ServiceWorker update failed: "+t)})),t)))))}Vn(t){this.yn||(t.unregister(),o.Z.j.info("Service worker successfully unregistered."))}subscribe(t,e){if(!c.Z.isPushSupported())return o.Z.j.info(d.qn),void("function"==typeof e&&e(!1));if(this.vn){if(!this.yn&&null!=window.location){let t=this.dn;-1===t.indexOf(window.location.host)&&(t=window.location.host+t),-1===t.indexOf(window.location.protocol)&&(t=window.location.protocol+"//"+t);const s=t.substr(0,t.lastIndexOf("/")+1);if(0!==u.SD.Cn().indexOf(s))return o.Z.j.error("Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from "+window.location.pathname+" but service worker is at "+t+")"),void("function"==typeof e&&e(!0))}if(c.Z.isPushBlocked())return void this.Tn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",e);if(this.wt&&!this.wt.En()&&0===this.wt.li())return o.Z.j.info("Waiting for VAPID key from server config before subscribing to push."),void this.wt.Rn((()=>{this.subscribe(t,e)}));const s=()=>{o.Z.j.info("Permission for push notifications was denied."),"function"==typeof e&&e(!1)},i=()=>{let t="Permission for push notifications was ignored.";c.Z.isPushBlocked()&&(t+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),o.Z.j.info(t),"function"==typeof e&&e(!0)},h=c.Z.isPushPermissionGranted(),d=()=>{!h&&this.hn&&this.hn.setPushNotificationSubscriptionType(l.Z.NotificationSubscriptionTypes.OPTED_IN),this.In().then((s=>{if(null==s)return o.Z.j.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof e&&e(!0));s.pushManager.getSubscription().then((i=>{let l=null;if(this.wt&&null!=this.wt.En()&&(l=o.Z.On.Fn(this.wt.En())),i){let u,c=null,h=null;if(this.u&&(u=this.u.v(a.I.k.Bn)),u&&!(0,n.kJ)(u)){let t;try{t=r.Z.Yn(u).Mn}catch(e){t=null}null==t||isNaN(t.getTime())||0===t.getTime()||(c=t,h=new Date(c),h.setMonth(c.getMonth()+6))}null!=l&&i.options&&i.options.applicationServerKey&&i.options.applicationServerKey.byteLength&&i.options.applicationServerKey.byteLength>0&&!(0,n.Xy)(l,new Uint8Array(i.options.applicationServerKey))?(i.options.applicationServerKey.byteLength>12?o.Z.j.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):o.Z.j.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.An(i,s,l,t,e)):i.expirationTime&&new Date(i.expirationTime).valueOf()<=(new Date).valueOf()?(o.Z.j.info("Push subscription is expired, creating new subscription."),this.An(i,s,l,t,e)):u&&(0,n.kJ)(u)?this.An(i,s,l,t,e):null==h?(o.Z.j.info("No push subscription creation date found, creating new subscription."),this.An(i,s,l,t,e)):h.valueOf()<=(new Date).valueOf()?(o.Z.j.info("Push subscription older than 6 months, creating new subscription."),this.An(i,s,l,t,e)):(o.Z.j.info("Device already subscribed to push, sending existing subscription to backend."),this.Un(i,c,t))}else this.jn(s,l,t,e)})).catch((t=>{o.Z.j.error("Error checking current push subscriptions: "+t)}))})).catch((t=>{o.Z.j.error("ServiceWorker registration failed: "+t)}))};this.requestPermission(d,i,s)}else if(this.Pn){if(null==this.bn||""===this.bn)return o.Z.j.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof e&&e(!0));const s=window.safari.pushNotification.permission(this.bn);this.zn(this.bn,s,t,e)}}unsubscribe(t,e){if(!c.Z.isPushSupported())return o.Z.j.info(d.qn),void("function"==typeof e&&e());this.vn?navigator.serviceWorker.getRegistration().then((s=>{s?s.pushManager.getSubscription().then((i=>{i&&(this.xn(),i.unsubscribe().then((i=>{i?(o.Z.j.info("Device successfully unsubscribed from push."),"function"==typeof t&&t()):(o.Z.j.error("Failed to unsubscribe device from push."),"function"==typeof e&&e()),this.Vn(s)})).catch((t=>{o.Z.j.error("Push unsubscription error: "+t),"function"==typeof e&&e()})))})).catch((t=>{o.Z.j.error("Error unsubscribing from push: "+t),"function"==typeof e&&e()})):(o.Z.j.info("Device already unsubscribed from push."),"function"==typeof t&&t())})):this.Pn&&(this.xn(),o.Z.j.info("Device unsubscribed from push."),"function"==typeof t&&t())}}d.qn="Push notifications are not supported in this browser.";const f={t:!1,i:null,m:()=>(f.o(),f.i||(f.i=new d(i.ZP.br(),i.ZP.Ma(),i.ZP.te(),i.ZP.Ys(),i.ZP.nn(i.JY._a),i.ZP.nn(i.JY.ka),i.ZP.tr(),i.ZP.nn(i.JY.qa),i.ZP.nn(i.JY.Aa),i.ZP.l())),f.i),o:()=>{f.t||(i.ZP.g(f),f.t=!0)},destroy:()=>{f.i=null,f.t=!1}},p=f},12261:(t,e,s)=>{s.r(e),s.d(e,{requestPushPermission:()=>r});var i=s(59463),n=s(80761);function r(t,e){if(i.ZP.rr())return n.default.m().subscribe(((e,s,n)=>{const r=i.ZP.cr();r&&r.requestImmediateDataFlush(),"function"==typeof t&&t(e,s,n)}),e)}},77824:(t,e,s)=>{s.r(e),s.d(e,{unregisterPush:()=>r});var i=s(59463),n=s(80761);function r(t,e){if(i.ZP.rr())return n.default.m().unsubscribe(t,e)}},74556:(t,e,s)=>{s.d(e,{Z:()=>n});const i={kn:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,Dn:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>i.kn()||i.Dn(),isPushBlocked:()=>{const t=i.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,e=i.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return t||e},isPushPermissionGranted:()=>i.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Gr:()=>!i.isPushBlocked()&&i.isPushSupported()&&!i.isPushPermissionGranted()},n=i},60803:(t,e,s)=>{s.d(e,{Z:()=>u});var i=s(42308),n=s(8548),r=s(63552),o=s(52367),a=s(45966),l=s(17615);class u{constructor(t,e){this.wt=t,this.u=e,this.wt=t,this.u=e}getUserId(){const t=this.u.tu(a.I.eu.su);if(null==t)return null;let e=t.iu,s=(0,n.E)(e);if(s>l.Z.lr){for(;s>l.Z.lr;)e=e.slice(0,e.length-1),s=(0,n.E)(e);t.iu=e,this.u.uu(a.I.eu.su,t)}return e}ru(t){const e=null==this.getUserId();this.u.uu(a.I.eu.su,new i.Z(t)),e&&this.u.ou(t)}setCustomUserAttribute(t,e){if(this.wt.hu(t))return o.Z.j.info('Custom Attribute "'+t+'" is blocklisted, ignoring.'),!1;const s={};return s[t]=e,this.nu(l.Z.lu,s,!0)}nu(t,e,s=!1,i=!1){const n=this.u.mu(this.getUserId(),t,e);let r="",a=t,l=e;return s&&(r=" custom","object"==typeof e&&(a=Object.keys(e)[0],l=e[a],"object"==typeof l&&(l=JSON.stringify(l,null,2)))),!i&&n&&o.Z.j.info(`Logged${r} attribute ${a} with value ${l}`),n}_n(t,e,s,i,n){this.nu("push_token",t,!1,!0),this.nu("custom_push_public_key",s,!1,!0),this.nu("custom_push_user_auth",i,!1,!0),this.nu("custom_push_vapid_public_key",n,!1,!0);const l=o.Z.zt.Ft,u=new o.Z.xt(l,o.Z.j),c=new r.Z(t,e,s,i,n);this.u.D(a.I.k.Bn,c.ss()),u.setItem(l.Jt.cu,l.ie,!0)}Nn(t){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),t){const t=o.Z.zt.Ft,e=new o.Z.xt(t,o.Z.j);this.u.D(a.I.k.Bn,!1),e.setItem(t.Jt.cu,t.ie,!1)}}}},17615:(t,e,s)=>{s.d(e,{Z:()=>l});var i=s(72893),n=s(52367),r=s(3905),o=s(27671),a=s(57750);class l{constructor(t,e){this.ft=t,this.ki=e,this.ft=t,this.ki=e}getUserId(t){null==t&&n.Z.j.error("getUserId must be supplied with a callback. e.g., braze.getUser().getUserId(function(userId) {console.log('the user id is ' + userId)})"),"function"==typeof t&&t(this.ft.getUserId())}addAlias(t,e){return!(0,r.ro)(t,"add alias","the alias",!1)||t.length<=0?(n.Z.j.error("addAlias requires a non-empty alias"),!1):!(0,r.ro)(e,"add alias","the label",!1)||e.length<=0?(n.Z.j.error("addAlias requires a non-empty label"),!1):this.ki.$n(t,e).O}setFirstName(t){return!!(0,r.ro)(t,"set first name","the firstName",!0)&&this.ft.nu("first_name",t)}setLastName(t){return!!(0,r.ro)(t,"set last name","the lastName",!0)&&this.ft.nu("last_name",t)}setEmail(t){return null===t||(0,r.vV)(t)?this.ft.nu("email",t):(n.Z.j.error(`Cannot set email address - "${t}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!(0,i.fk)(l.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.ft.nu("gender",t)}setDateOfBirth(t,e,s){return null===t&&null===e&&null===s?this.ft.nu("dob",null):(t=null!=t?parseInt(t.toString()):null,e=null!=e?parseInt(e.toString()):null,s=null!=s?parseInt(s.toString()):null,null==t||null==e||null==s||isNaN(t)||isNaN(e)||isNaN(s)||e>12||e<1||s>31||s<1?(n.Z.j.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.ft.nu("dob",`${t}-${e}-${s}`))}setCountry(t){return!!(0,r.ro)(t,"set country","the country",!0)&&this.ft.nu("country",t)}setHomeCity(t){return!!(0,r.ro)(t,"set home city","the homeCity",!0)&&this.ft.nu("home_city",t)}setLanguage(t){return!!(0,r.ro)(t,"set language","the language",!0)&&this.ft.nu("language",t)}setEmailNotificationSubscriptionType(t){return!!(0,i.fk)(l.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.ft.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!(0,i.fk)(l.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.ft.nu("push_subscribe",t)}setPhoneNumber(t){return!!(0,r.ro)(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(l.Ln)?this.ft.nu("phone",t):(n.Z.j.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(t,e,s,i,r){return null==t||null==e?(n.Z.j.error("Cannot set last-known location - latitude and longitude are required."),!1):(t=parseFloat(t.toString()),e=parseFloat(e.toString()),null!=s&&(s=parseFloat(s.toString())),null!=i&&(i=parseFloat(i.toString())),null!=r&&(r=parseFloat(r.toString())),isNaN(t)||isNaN(e)||null!=s&&isNaN(s)||null!=i&&isNaN(i)||null!=r&&isNaN(r)?(n.Z.j.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):t>90||t<-90||e>180||e<-180?(n.Z.j.error("Cannot set last-known location - latitude and longitude are bounded by 90 and 180 respectively."),!1):null!=s&&s<0||null!=r&&r<0?(n.Z.j.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.ki.setLastKnownLocation(this.ft.getUserId(),t,e,i,s,r).O)}setCustomUserAttribute(t,e,s){if(!(0,r.bj)(t))return!1;const l=e=>{const[s]=(0,r.lg)(e,o.db,"attribute value",`set custom user attribute "${t}"`,"custom user attribute");return s};if((0,i.kJ)(e)){const[s,i]=(0,r.$g)(t,e);if(!s&&!i&&0!==e.length)return!1;if(s||0===e.length)return this.ki.Gn(n.Z.q.Hn,t,e).O;for(const t of e)if(!l(t))return!1}else if((0,i.Kn)(e)){if(!l(e))return!1;if(s)return this.ki.Gn(n.Z.q.Kn,t,e).O}else{if(void 0===e||!(0,r.UO)(e))return!1;if((0,i.J_)(e)&&(e=(0,a.BT)(e)),"string"==typeof e&&!(0,r.zM)(e,`set custom user attribute "${t}"`,"the element in the given array"))return!1}return this.ft.setCustomUserAttribute(t,e)}addToCustomAttributeArray(t,e){return!!(0,r.zM)(t,"add to custom user attribute array","the given key")&&!(null!=e&&!(0,r.zM)(e,"add to custom user attribute array","the given value"))&&this.ki.Gn(n.Z.q.Jn,t,e).O}removeFromCustomAttributeArray(t,e){return!!(0,r.zM)(t,"remove from custom user attribute array","the given key")&&!(null!=e&&!(0,r.zM)(e,"remove from custom user attribute array","the given value"))&&this.ki.Gn(n.Z.q.Qn,t,e).O}incrementCustomUserAttribute(t,e){if(!(0,r.zM)(t,"increment custom user attribute","the given key"))return!1;null==e&&(e=1);const s=parseInt(e.toString());return isNaN(s)||s!==parseFloat(e.toString())?(n.Z.j.error(`Cannot increment custom user attribute because the given incrementValue "${e}" is not an integer.`),!1):this.ki.Gn(n.Z.q.Xn,t,s).O}setCustomLocationAttribute(t,e,s){return!!(0,r.zM)(t,"set custom location attribute","the given key")&&((null!==e||null!==s)&&(e=null!=e?parseFloat(e.toString()):null,s=null!=s?parseFloat(s.toString()):null,null==e&&null!=s||null!=e&&null==s||null!=e&&(isNaN(e)||e>90||e<-90)||null!=s&&(isNaN(s)||s>180||s<-180))?(n.Z.j.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by 90 and 180 respectively, or must both be null for removal."),!1):this.ki.Zn(t,e,s).O)}addToSubscriptionGroup(t){return!(0,r.ro)(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(n.Z.j.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.ki.au(t,l.du.SUBSCRIBED).O}removeFromSubscriptionGroup(t){return!(0,r.ro)(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(n.Z.j.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.ki.au(t,l.du.UNSUBSCRIBED).O}_n(t,e,s,i,n){this.ft._n(t,e,s,i,n),this.ki.pu()}Nn(t){this.ft.Nn(t)}}l.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},l.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},l.Ln=/^[0-9 .\\(\\)\\+\\-]+$/,l.du={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},l.bu="user_id",l.lu="custom",l.lr=997},67:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(85563);class n{constructor(t,e){this.cards=t,this.lastUpdated=e,this.cards=t,this.lastUpdated=e}getUnreadCardCount(){let t=0;for(const e of this.cards)e.viewed||e instanceof i.Z||t++;return t}ur(){throw new Error("Must be implemented in a subclass")}logCardImpressions(t){throw new Error("Must be implemented in a subclass")}logCardClick(t){throw new Error("Must be implemented in a subclass")}sr(){throw new Error("Must be implemented in a subclass")}}n.mr=6e4,n.Oh=500,n.uo=1e4},40158:(t,e,s)=>{s.d(e,{Z:()=>i});class i{constructor(){}Ts(t){}changeUser(t=!1){}clearData(t=!1){}}},27671:(t,e,s)=>{s.d(e,{Fz:()=>i,De:()=>n,U4:()=>r,rF:()=>o,_P:()=>a,db:()=>l,Go:()=>u,O4:()=>c,JG:()=>h,dH:()=>d,Tt:()=>f,S6:()=>p});const i=100,n="inAppMessage must be an InAppMessage object",r="must be a Card object",o=500,a="logCustomEvent",l="setCustomUserAttribute",u="Braze must be initialized before calling methods.",c=5,h=90,d=72e5,f=3,p=1},39179:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(52367),n=s(59463),r=s(57559),o=s(24673);const a={N:(t,e,s)=>{var a;const l=new o.Z,u=n.ZP.aa();if(!u)return i.Z.j.info(`Not logging event with type "${t}" because the current session ID could not be found.`),l;const c=u.co();l.ve.push(new r.Z(s||(null===(a=n.ZP.ir())||void 0===a?void 0:a.getUserId()),t,(new Date).valueOf(),c,e));const h=n.ZP.l();return h&&(l.O=h.bo(l.ve)),l}}},64095:(t,e,s)=>{s.d(e,{cP:()=>g,tQ:()=>Z,cz:()=>v,cV:()=>y,Yz:()=>S,Of:()=>A,GB:()=>E});var i=s(67),n=s(35608),r=s(11507),o=s(85563),a=s(72857),l=s(72893),u=s(7429),c=s(9313),h=s(18503),d=s(52367),f=s(3905),p=s(73046);const g="data-last-requested-refresh",m={};function Z(t){t&&(t.className=t.className.replace("ab-show","ab-hide"),setTimeout((()=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),i.Z.Oh));const e=t.getAttribute("data-update-subscription-id");null!=e&&(0,h.A)(e);const s=t.getAttribute("data-listener-id");null!=s&&(window.removeEventListener("scroll",m[s]),delete m[s])}function b(t,e){const s=document.createElement("div");if(s.className="ab-feed-body",s.setAttribute("aria-label","Feed"),s.setAttribute("role","feed"),null==t.lastUpdated){const t=document.createElement("div");t.className="ab-no-cards-message";const e=document.createElement("i");e.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",t.appendChild(e),s.appendChild(t)}else{let i=!1;const r=e=>t.logCardClick(e);for(const a of t.cards){const l=a instanceof o.Z;!l||t.ur()?(s.appendChild((0,n.Dj)(a,r,e)),i=i||!l):d.Z.j.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!i){const t=document.createElement("div");t.className="ab-no-cards-message",t.innerHTML=c.Z.m().get("NO_CARDS_MESSAGE")||"",t.setAttribute("role","article"),s.appendChild(t)}}return s}function v(t,e){if(null!=t&&null!=e){const s=[],i=e.querySelectorAll(".ab-card");t.yo||(t.yo={});for(let e=0;e<i.length;e++){const o=(0,n.sv)(i[e]),a=(0,r.rJ)(i[e]),l=(0,r.Fr)(i[e]);if(t.yo[o]){a||l||(0,n.pq)(i[e]);continue}let u=(0,n.ql)(i[e]),c=(0,n.rW)(i[e]);const h=u,d=c;if(!u&&a&&(u=!0,(0,n.Ji)(i[e])),!c&&l&&(c=!0,(0,n.Zw)(i[e])),u&&c){if(h&&d)continue;for(const e of t.cards)if(e.id===o){t.yo[e.id]=!0,s.push(e);break}}}s.length>0&&t.logCardImpressions(s)}}function y(t,e){if(null==t||null==e)return;e.setAttribute("aria-busy","true");const s=e.querySelectorAll(".ab-refresh-button")[0];null!=s&&(s.className+=" fa-spin");const n=(new Date).valueOf().toString();e.setAttribute("data-last-requested-refresh",n),setTimeout((()=>{if(e.getAttribute("data-last-requested-refresh")===n){const t=e.querySelectorAll(".fa-spin");for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/fa-spin/g,"");const s=e.querySelectorAll(".ab-initial-spinner")[0];if(null!=s){const t=document.createElement("span");t.innerHTML=c.Z.m().get("FEED_TIMEOUT_MESSAGE")||"",null!=s.parentNode&&(s.parentNode.appendChild(t),s.parentNode.removeChild(s))}"true"===e.getAttribute("aria-busy")&&e.setAttribute("aria-busy","false")}}),i.Z.uo),t.sr()}function S(t,e,s){const i=document.createElement("div");i.className="ab-feed ab-hide ab-effect-slide",i.setAttribute("role","dialog"),i.setAttribute("aria-label","Feed"),i.setAttribute("tabindex","-1");const n=document.createElement("div");n.className="ab-feed-buttons-wrapper",n.setAttribute("role","group"),i.appendChild(n);const r=document.createElement("i");r.className="fa fa-times ab-close-button",r.setAttribute("aria-label","Close Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button");const o=t=>{Z(i),t.stopPropagation()};r.addEventListener("keydown",(t=>{t.keyCode!==u.m.Fo&&t.keyCode!==u.m.To||o(t)})),r.onclick=o;const a=document.createElement("i");a.className="fa fa-refresh ab-refresh-button",t&&null==t.lastUpdated&&(a.className+=" fa-spin"),a.setAttribute("aria-label","Refresh Feed"),a.setAttribute("tabindex","0"),a.setAttribute("role","button");const l=e=>{y(t,i),e.stopPropagation()};a.addEventListener("keydown",(t=>{t.keyCode!==u.m.Fo&&t.keyCode!==u.m.To||l(t)})),a.onclick=l,n.appendChild(a),n.appendChild(r),i.appendChild(b(t,e));const c=()=>v(t,i);if(i.addEventListener("scroll",c),!s){window.addEventListener("scroll",c);const t=d.Z.Z.Y();m[t]=c,i.setAttribute("data-listener-id",t)}return i}function A(t,e,s,i,n){if(!(0,l.kJ)(e))return;const r=[];for(const t of e)if(t instanceof a.Z){if(t.url&&f.y9.test(t.url)){const e=(0,p.OL)(t.url);if((0,p.je)(e)){d.Z.j.error((0,p.Tu)(p.yi._r,"Content Card"));continue}}r.push(t)}if(t.cards=r,t.lastUpdated=s,null!=i)if(i.setAttribute("aria-busy","false"),null==t.lastUpdated)Z(i);else{const e=i.querySelectorAll(".ab-feed-body")[0];if(null!=e){const s=b(t,n);e.parentNode&&e.parentNode.replaceChild(s,e),v(t,s.parentNode)}}}function E(t,e){t&&e.setAttribute("data-update-subscription-id",t)}},58426:(t,e,s)=>{s.d(e,{Z:()=>i});const i={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"   .     ",FEED_TIMEOUT_MESSAGE:"   "},cs:{NO_CARDS_MESSAGE:"V tuto chvli pro vs nemme dn aktualizace.<br/>Zkontrolujte prosm znovu pozdji.",FEED_TIMEOUT_MESSAGE:"Prosm zkuste to znovu pozdji."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Prv venligst senere.",FEED_TIMEOUT_MESSAGE:"Prv venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfgbar.<br/>Bitte spter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte spter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor comprubelo ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor intntelo ms tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizacin.<br/>Vuelva a verificar ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo ms tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"Pivityksi ei ole saatavilla.<br/>Tarkista myhemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yrit myhemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise  jour disponible.<br/>Veuillez vrifier ultrieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez ressayer ultrieurement."},he:{NO_CARDS_MESSAGE:".  .    ",FEED_TIMEOUT_MESSAGE:".   "},hi:{NO_CARDS_MESSAGE:"            .",FEED_TIMEOUT_MESSAGE:"     ."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare pi tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare pi tardi."},ja:{NO_CARDS_MESSAGE:"<br/>",FEED_TIMEOUT_MESSAGE:""},ko:{NO_CARDS_MESSAGE:" .    .",FEED_TIMEOUT_MESSAGE:"   ."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prv igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Prosz sprawdzi ponownie pniej.",FEED_TIMEOUT_MESSAGE:"Prosz sprbowa ponownie pniej."},pt:{NO_CARDS_MESSAGE:"No temos atualizaes.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"No temos nenhuma atualizao.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:",   ."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>Frsk igen senare.",FEED_TIMEOUT_MESSAGE:"Frsk igen senare."},th:{NO_CARDS_MESSAGE:" .",FEED_TIMEOUT_MESSAGE:"."},uk:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:" ,    ."},vi:{NO_CARDS_MESSAGE:"Chng ti khng c cp nht no.<br/>Vui lng kim tra li sau.",FEED_TIMEOUT_MESSAGE:"Vui lng th li sau."},"zh-hk":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hans":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hant":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-tw":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},zh:{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."}}},59087:(t,e,s)=>{s.r(e),s.d(e,{Banner:()=>n.Z,BrazeSdkMetadata:()=>q,CaptionedImage:()=>o.Z,Card:()=>i.Z,ClassicCard:()=>a.Z,ContentCards:()=>_,ControlCard:()=>l.Z,ControlMessage:()=>wt.Z,DeviceProperties:()=>H.Z,FeatureFlag:()=>re.Z,Feed:()=>mt.Z,FullScreenMessage:()=>Pt.Z,HtmlMessage:()=>It.Z,ImageOnly:()=>r.Z,InAppMessage:()=>Nt.Z,InAppMessageButton:()=>Tt.Z,ModalMessage:()=>kt.Z,SlideUpMessage:()=>Dt.Z,User:()=>ne.Z,WindowUtils:()=>Bt.SD,addSdkMetadata:()=>J,automaticallyShowInAppMessages:()=>Yt,changeUser:()=>$.changeUser,deferInAppMessage:()=>Wt,destroy:()=>K,destroyFeed:()=>vt,disableSDK:()=>Y,enableSDK:()=>W,getAllFeatureFlags:()=>ue,getCachedContentCards:()=>O,getCachedFeed:()=>bt,getDeferredInAppMessage:()=>Vt,getDeviceId:()=>V,getFeatureFlag:()=>le,getUser:()=>X.P,handleBrazeAction:()=>gt.h,hideContentCards:()=>j,initialize:()=>Q,isDisabled:()=>tt,isPushBlocked:()=>Qt,isPushPermissionGranted:()=>te,isPushSupported:()=>ee,logCardClick:()=>u.d,logCardDismissal:()=>c.K,logCardImpressions:()=>h.p,logContentCardClick:()=>f,logContentCardImpressions:()=>d,logContentCardsDisplayed:()=>x,logCustomEvent:()=>et.logCustomEvent,logFeatureFlagImpression:()=>he,logFeedDisplayed:()=>yt.j,logInAppMessageButtonClick:()=>qt,logInAppMessageClick:()=>Ft,logInAppMessageHtmlClick:()=>Lt,logInAppMessageImpression:()=>xt,logPurchase:()=>st.logPurchase,openSession:()=>rt,refreshFeatureFlags:()=>oe.refreshFeatureFlags,removeAllSubscriptions:()=>ot,removeSubscription:()=>at.A,requestContentCardsRefresh:()=>D,requestFeedRefresh:()=>St.a,requestImmediateDataFlush:()=>lt.requestImmediateDataFlush,requestPushPermission:()=>se.requestPushPermission,setLogger:()=>ut,setSdkAuthenticationSignature:()=>ht,showContentCards:()=>G,showFeed:()=>At.showFeed,showInAppMessage:()=>Kt,subscribeToContentCardsUpdates:()=>F,subscribeToFeatureFlagsUpdates:()=>ce,subscribeToFeedUpdates:()=>Et.n,subscribeToInAppMessage:()=>Ht,subscribeToSdkAuthenticationFailures:()=>dt,toggleContentCards:()=>B,toggleFeed:()=>Ct,toggleLogging:()=>ft,unregisterPush:()=>ie.unregisterPush,wipeData:()=>pt});var i=s(72857),n=s(17283),r=s(8378),o=s(5383),a=s(37653),l=s(85563),u=s(1280),c=s(22080),h=s(11066);function d(t){return(0,h.p)(t,!0)}function f(t){return(0,u.d)(t,!0)}var p=s(67),g=s(59463),m=s(41843),Z=s(40158),b=s(57750),v=s(1148),y=s(23756),S=s(52367),A=s(45966),E=s(74663),C=s(39179),N=s(76870),T=s(96504),w=s(27671);class P extends Z.Z{constructor(t,e,s,i,n){super(),this.ft=t,this.u=e,this.wt=s,this.vt=i,this.gt=n,this.ft=t,this.u=e,this.wt=s,this.vt=i,this.gt=n,this.yt=new E.Z,g.ZP.jt(this.yt),this.kt=0,this.Ut=0,this.cards=[],this.Lt();const r=S.Z.zt.Ft;new S.Z.xt(r,S.Z.j).Mt(r.Jt.qt,(t=>{this.Pt(t)})),this.$t=null,this._t=null,this.Bt=null,this.Gt=null,this.Ht=null,this.Kt=10,this.Ot=0}Qt(){return this.$t}Vt(t){this.$t=t}Wt(){return this._t}Xt(t){this._t=t}Lt(){if(!this.u)return;const t=this.u.v(A.I.k.Yt)||[],e=[];for(let s=0;s<t.length;s++){const i=(0,y.rN)(t[s]);null!=i&&e.push(i)}this.cards=this.Zt(this.Cs(e,!1)),this.kt=this.u.v(A.I.k.ws)||this.kt,this.Ut=this.u.v(A.I.k.vs)||this.Ut}Ns(t,e=!1,s=0,i=0){let n;if(e){n=[];for(const t of this.cards)t.test&&n.push(t)}else n=this.cards.slice();for(let s=0;s<t.length;s++){const i=t[s];let r=null;for(let t=0;t<this.cards.length;t++)if(i.id===this.cards[t].id){r=this.cards[t];break}if(e){const t=(0,y.xA)(i);null!=r&&r.viewed&&t&&(t.viewed=!0),null!=t&&n.push(t)}else if(null==r){const t=(0,y.xA)(i);null!=t&&n.push(t)}else if(!r.ot(i))for(let t=0;t<n.length;t++)if(i.id===n[t].id){n.splice(t,1);break}}this.cards=this.Zt(this.Cs(n,e)),this.Rs(),this.kt=s,this.Ut=i,this.u&&(this.u.D(A.I.k.ws,this.kt),this.u.D(A.I.k.vs,this.Ut))}Ts(t){if(this.Ds()&&null!=t&&t.cards){this.u&&this.u.D(A.I.k.Ss,g.ZP.ks());const e=t.full_sync;e||this.Lt(),this.Ns(t.cards,e,t.last_full_sync_at,t.last_card_updated_at),this.yt.Et(this.Us(!0))}}As(t){this.u&&this.u.D(A.I.k.Ls,t)}Fs(t,e,s){const i=()=>{this.Ms(e,s,!0)},n=t?(0,m.D)(t):null;let r;if(this.Es(),!n||!n["retry-after"])return void this.As(0);const o=n["retry-after"];if(isNaN(o)&&!isNaN(Date.parse(o)))r=Date.parse(o)-(new Date).getTime(),r<0&&i();else{if(isNaN(parseFloat(o.toString()))){const t="Received unexpected value for retry-after header in /sync response";return C.Z.N(S.Z.q.qs,{e:t+": "+o}),void this.As(0)}r=1e3*parseFloat(o.toString())}this.Bt=window.setTimeout((()=>{i()}),r);let a=0;this.u&&(a=this.u.v(A.I.k.Ls)),(null==a||isNaN(parseInt(a.toString())))&&(a=0),this.As(parseInt(a.toString())+1)}Pt(t){if(!this.Ds())return;this.Lt();const e=this.cards.slice();let s=null;this.ft&&(s=this.ft.getUserId());for(let i=0;i<t.length;i++)if(s===t[i].userId||null==s&&null==t[i].userId){const s=t[i].card;let n=null;for(let t=0;t<this.cards.length;t++)if(s.id===this.cards[t].id){n=this.cards[t];break}if(null==n){const t=(0,y.xA)(s);null!=t&&e.push(t)}else if(!n.ot(s))for(let t=0;t<e.length;t++)if(s.id===e[t].id){e.splice(t,1);break}}this.cards=this.Zt(this.Cs(e,!1)),this.Rs(),this.yt.Et(this.Us(!0))}Cs(t,e){let s={},i={},n={};this.u&&(s=this.u.v(A.I.k.C)||{},i=this.u.v(A.I.k.K)||{},n=this.u.v(A.I.k.G)||{});const r={},o={},a={};for(let e=0;e<t.length;e++){const l=t[e].id;l&&(s[l]&&(t[e].clicked=!0,r[l]=!0),i[l]&&(t[e].viewed=!0,o[l]=!0),n[l]&&(t[e].dismissed=!0,a[l]=!0))}return e&&this.u&&(this.u.D(A.I.k.C,r),this.u.D(A.I.k.K,o),this.u.D(A.I.k.G,a)),t}Zt(t){const e=[],s=new Date;let i={};this.u&&(i=this.u.v(A.I.k.G)||{});let n=!1;for(let r=0;r<t.length;r++){const o=t[r].url;if(!this.vt&&o&&(0,v.o)(o)){S.Z.j.error(`Card with url ${o} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`);continue}const a=t[r].expiresAt;let l=!0;if(null!=a&&(l=a>=s),l=l&&!t[r].dismissed,l)e.push(t[r]);else{const e=t[r].id;e&&(i[e]=!0),n=!0}}return n&&this.u&&this.u.D(A.I.k.G,i),e}Rs(){if(!this.u)return;const t=[];for(let e=0;e<this.cards.length;e++)t.push(this.cards[e].ss());this.u.D(A.I.k.Yt,t)}Es(){this.Bt&&(clearTimeout(this.Bt),this.Bt=null)}Is(){null!=this.Gt&&(clearTimeout(this.Gt),this.Gt=null)}Js(t=1e3*this.Kt,e,s){this.Is(),this.Gt=window.setTimeout((()=>{this.Ms(e,s,!0)}),t),this.Ht=t}Ms(t,e,s=!1,i=!0){var n;const r=this.gt,o=this.u;if(!r||!o)return void("function"==typeof e&&e());const a=!s;if(a&&(this.Es(),this.As(0)),!this.Ds())return void(this.wt&&this.wt.Ps((()=>{this.Ms(t,e)})));let l=!0;if(a&&(null===(n=this.wt)||void 0===n?void 0:n.$s())&&(l=this._s()),!l)return void S.Z.j.info("Content card sync being throttled.");i&&this.Is();const u=r.Bs({},!0);o.v(A.I.k.Ss)!==g.ZP.ks()&&this.Gs(),u.last_full_sync_at=this.kt,u.last_card_updated_at=this.Ut;const c=r.Hs(u,N.Z.Os.Ks,s);let h=!1;r.Qs(u,(()=>{if(this.u){const t=(new Date).valueOf();a&&this.u.D(A.I.k.Vs,t),N.Z.Ws(this.u,N.Z.Os.Ks,t)}m.Z.Xs({url:r.Ys()+"/content_cards/sync",data:u,headers:c,O:(s,i)=>{if(!r.Zs(u,s,c))return h=!0,void("function"==typeof e&&e());r.ti(),this.Fs(i,t,e),this.Ts(s),h=!1,N.Z.si(this.u,N.Z.Os.Ks,1),"function"==typeof t&&t()},error:t=>{r.ii(t,"retrieving content cards"),h=!0,"function"==typeof e&&e()},ei:()=>{if(h&&i&&!this.Gt&&this.Ot+1<w.Tt){N.Z.hi(this.u,N.Z.Os.Ks);let s=this.Ht;(null==s||s<1e3*this.Kt)&&(s=1e3*this.Kt),this.Js(Math.min(3e5,(0,T.R)(1e3*this.Kt,3*s)),t,e),this.Ot=this.Ot+1}}})}))}Us(t){t||this.Lt();const e=this.Zt(this.cards);e.sort(((t,e)=>t.pinned&&!e.pinned?-1:e.pinned&&!t.pinned?1:t.updated&&e.updated&&t.updated>e.updated?-1:t.updated&&e.updated&&e.updated>t.updated?1:0));let s=Math.max(this.Ut||0,this.kt||0);return 0===s&&(s=void 0),this.u&&this.u.v(A.I.k.vs)===this.Ut&&void 0===s&&(s=this.Ut),new _(e,(0,b.X2)(s))}ri(t){return this.yt.lt(t)}Gs(){this.kt=0,this.Ut=0,this.u&&(this.u.ni(A.I.k.ws),this.u.ni(A.I.k.vs))}changeUser(t){t||(this.cards=[],this.yt.Et(new _(this.cards.slice(),null)),this.u&&(this.u.ni(A.I.k.Yt),this.u.ni(A.I.k.C),this.u.ni(A.I.k.K),this.u.ni(A.I.k.G))),this.Gs()}clearData(t){this.kt=0,this.Ut=0,this.cards=[],this.yt.Et(new _(this.cards.slice(),null)),t&&this.u&&(this.u.ni(A.I.k.Yt),this.u.ni(A.I.k.C),this.u.ni(A.I.k.K),this.u.ni(A.I.k.G),this.u.ni(A.I.k.ws),this.u.ni(A.I.k.vs))}Ds(){return!(this.wt&&!this.wt.oi()&&(0!==this.wt.li()&&this.ai(),1))}ui(t){this.u&&this.u.D(A.I.k.ci,t)}fi(){return this.u?this.u.v(A.I.k.ci):null}_s(){const t=this.u,e=this.wt;if(!t||!e)return!0;const s=t.v(A.I.k.Vs);if(null==s||isNaN(s))return!0;const i=e.di(),n=e.mi();if(-1===i||-1===n)return!0;let r=this.fi();(null==r||isNaN(r))&&(r=i);const o=((new Date).valueOf()-s)/1e3;return r=Math.min(r+o/n,i),!(r<1||(r=Math.trunc(r)-1,this.ui(r),0))}ai(){this.yt.Et(new _([],new Date)),this.u&&this.u.ni(A.I.k.Yt)}}const I={t:!1,provider:null,er:()=>(I.o(),I.provider||(I.provider=new P(g.ZP.ir(),g.ZP.l(),g.ZP.tr(),g.ZP.nr(),g.ZP.ar()),g.ZP.dr(I.provider)),I.provider),o:()=>{I.t||(g.ZP.g(I),I.t=!0)},destroy:()=>{I.provider=null,I.t=!1}},k=I;function D(t,e){if(g.ZP.rr())return k.er().Ms(t,e)}class _ extends p.Z{constructor(t,e){super(t,e)}getUnviewedCardCount(){return super.getUnreadCardCount()}logCardImpressions(t){(0,h.p)(t,!0)}logCardClick(t){return(0,u.d)(t,!0)}sr(){D()}ur(){return!0}}function O(){if(g.ZP.rr())return k.er().Us(!1)}_.mr=6e4;var M=s(64095);function j(t){if(!g.ZP.rr())return;const e=document.querySelectorAll(".ab-feed");for(let s=0;s<e.length;s++)(null==t||null!=t&&e[s].parentNode===t)&&(0,M.tQ)(e[s])}var U=s(27406);function x(){if(g.ZP.rr())return(0,U.q)("logContentCardsDisplayed","method"),!0}function F(t){if(!g.ZP.rr())return;const e=k.er(),s=e.ri(t);if(!e.Wt()){const t=g.ZP.cr();if(t){const s=t.pr((()=>{e.Ms()}));s&&e.Xt(s)}}return s}var R=s(35608),L=s(46959);function G(t,e){if(!g.ZP.rr())return;(0,L.B)();let s=!1;null==t&&(t=document.body,s=!0);const i=g.ZP.nn(g.JY.tn)||g.ZP.nn(g.JY.en)||!1,n=k.er().Us(!1);"function"==typeof e&&(0,M.Of)(n,e(n.cards.slice()),n.lastUpdated,null,i);const r=(0,M.Yz)(n,i,s),o=k.er(),a=o.Qt();(null==n.lastUpdated||(new Date).valueOf()-n.lastUpdated.valueOf()>_.mr)&&(null==a||(new Date).valueOf()-a>_.mr)&&(S.Z.j.info(`Cached content cards were older than max TTL of ${_.mr} ms, requesting an update from the server.`),(0,M.cV)(n,r),o.Vt((new Date).valueOf()));const l=(new Date).valueOf(),u=F((function(t){const s=r.querySelectorAll(".ab-refresh-button")[0];if(null!=s){let t=500,e=t-=(new Date).valueOf()-l;const i=r.getAttribute(M.cP);i&&(e=parseInt(i),isNaN(e)||(t-=(new Date).valueOf()-e)),setTimeout((function(){s.className=s.className.replace(/fa-spin/g,"")}),Math.max(t,0))}let o=t.cards;"function"==typeof e&&(o=e(o.slice())),(0,M.Of)(n,o,t.lastUpdated,r,i)}));(0,M.GB)(u,r);const c=function(t){const e=t.querySelectorAll(".ab-feed");let i=null;for(let s=0;s<e.length;s++)e[s].parentNode===t&&(i=e[s]);null!=i?((0,M.tQ)(i),null!=i.parentNode&&i.parentNode.replaceChild(r,i)):t.appendChild(r),setTimeout((function(){r.className=r.className.replace("ab-hide","ab-show")}),0),s&&r.focus(),(0,M.cz)(n,r),(0,R.CG)(n.cards,t)};var h;null!=t?c(t):window.onload=(h=window.onload,function(){"function"==typeof h&&h(new Event("oldLoad")),c(document.body)})}function B(t,e){g.ZP.rr()&&(document.querySelectorAll(".ab-feed").length>0?j():G(t,e))}const q={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"};var z=s(72893);function J(t){if(!g.ZP.rr())return;if(!(0,z.kJ)(t))return S.Z.j.error("Cannot set SDK metadata because metadata is not an array."),!1;for(const e of t)if(!(0,z.fk)(q,e,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;const e=g.ZP.ar();return e&&e.addSdkMetadata(t),!0}var $=s(34790);function K(){S.Z.j.info("Destroying Braze instance"),g.ZP.destroy(!0)}var H=s(12017);function Y(){const t=g.ZP.cr();t&&t.requestImmediateDataFlush();const e=new A.Z.ee(null,!0),s="This-cookie-will-expire-in-"+e.ae();e.store(A.I.re,s);const i=S.Z.zt.Ft;new S.Z.xt(i,S.Z.j).setItem(i.Jt.se,i.ie,!0),S.Z.j.info("disableSDK was called"),g.ZP.destroy(!1),g.ZP.ne(!0)}function W(){new A.Z.ee(null,!0).remove(A.I.re);const t=S.Z.zt.Ft;new S.Z.xt(t,S.Z.j).oe(t.Jt.se,t.ie),S.Z.j.info("enableSDK was called"),g.ZP.destroy(!1),g.ZP.ne(!1)}function V(t){if(!g.ZP.rr())return;null==t&&S.Z.j.error("getDeviceId must be supplied with a callback. e.g., braze.getDeviceId(function(deviceId) {console.log('the device id is ' + deviceId)})");const e=g.ZP.te();"function"==typeof t&&e&&t(e.ce().id)}var X=s(46243);function Q(t,e){return g.ZP.initialize(t,e)}function tt(){return!!new A.Z.ee(null,!0).jr(A.I.re)}var et=s(61454),st=s(61364),it=s(24365),nt=s(22385);function rt(){if(!g.ZP.rr())return;const t=g.ZP.cr();if(!t)return;t.openSession();const e=S.Z.zt.Ft,s=new S.Z.xt(e,S.Z.j);s.hr(e.Jt.kr,((i,n)=>{const r=n.lastClick,o=n.trackingString;S.Z.j.info(`Firing push click trigger from ${o} push click at ${r}`);const a=t.vr(r,o),l=function(){nt.n.er().be(it.Z.zr,[o],a)};t.$r(l,l),s.oe(e.Jt.kr,i)})),s.Mt(e.Jt.wr,(function(e){t.yr(e)}))}function ot(){g.ZP.rr()&&g.ZP.removeAllSubscriptions()}var at=s(18503),lt=s(64650);function ut(t){S.Z.j.setLogger(t)}var ct=s(3905);function ht(t){if(!g.ZP.rr())return!1;if(""===t||!(0,ct.ro)(t,"set signature","signature",!1))return!1;const e=g.ZP.Sr();return!!e&&(e.setSdkAuthenticationSignature(t),!0)}function dt(t){if(!g.ZP.rr())return;const e=g.ZP.Sr();return e?e.subscribeToSdkAuthenticationFailures(t):void 0}function ft(){S.Z.j.toggleLogging()}function pt(){if(null==g.ZP.l())throw new Error(w.Go);const t=g.ZP.l();t&&t.clearData();const e=(0,z.XP)(S.Z.zt);for(let t=0;t<e.length;t++){const s=e[t],i=S.Z.zt[s];new S.Z.xt(i,S.Z.j).clearData()}if(g.ZP.rr())for(const t of g.ZP.gr())t.clearData(!0)}var gt=s(40420),mt=s(83628),Zt=s(30354);function bt(){if(g.ZP.rr())return Zt.Z.er().Hi()}function vt(){if(!g.ZP.rr())return;const t=document.querySelectorAll(".ab-feed");for(let e=0;e<t.length;e++)(0,M.tQ)(t[e])}var yt=s(46599),St=s(83516),At=s(33545),Et=s(96596);function Ct(t,e,s){g.ZP.rr()&&(document.querySelectorAll(".ab-feed").length>0?vt():(0,At.showFeed)(t,e,s))}var Nt=s(1792),Tt=s(84072),wt=s(98376),Pt=s(4410),It=s(31090),kt=s(3811),Dt=s(26616),_t=s(1087),Ot=s(44851),Mt=s(11507),jt=s(5242),Ut=s(20611);function xt(t){if(!g.ZP.rr())return!1;if(!(t instanceof Nt.Z||t instanceof wt.Z))return S.Z.j.error(w.De),!1;const e=t instanceof wt.Z?S.Z.q.eo:S.Z.q.Vi;return _t.Z.m().N(t,e).O}function Ft(t){if(!g.ZP.rr())return!1;if(!(t instanceof Nt.Z))return S.Z.j.error(w.De),!1;const e=_t.Z.m().N(t,S.Z.q.Li);if(e){t.so()||xt(t);for(let s=0;s<e.ve.length;s++)nt.n.er().be(it.Z.ro,[t.triggerId],e.ve[s])}return e.O}var Rt=s(73695);function Lt(t,e,s){if(!g.ZP.rr())return!1;if(!(t instanceof It.Z))return S.Z.j.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;let i=S.Z.q.Li;null!=e&&(i=S.Z.q.Qi);const n=_t.Z.m().N(t,i,e,s);if(n.O)for(let s=0;s<n.ve.length;s++)nt.n.er().be(it.Z.ro,[t.triggerId,e],n.ve[s]);return n.O}var Gt=s(35806),Bt=s(75319);function qt(t,e){var s;if(!g.ZP.rr())return!1;if(!(t instanceof Tt.Z))return S.Z.j.error("button must be an InAppMessageButton object"),!1;if(!(e instanceof Nt.Z))return S.Z.j.error(w.De),!1;const i=_t.Z.m().Xi(t,e);if(i.O)for(let n=0;n<i.ve.length;n++)nt.n.er().be(it.Z.ro,[e.triggerId,null===(s=t.id)||void 0===s?void 0:s.toString()],i.ve[n]);return i.O}var zt=s(7429);const Jt={Je:t=>{const e=t.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button");let s;for(let t=0;t<e.length;t++)s=e[t],s.tabIndex=0;if(e.length>0){const s=e[0],i=e[e.length-1];t.addEventListener("keydown",(e=>{const n=document.activeElement;e.keyCode===zt.m.oo&&(e.shiftKey||n!==i&&n!==t?!e.shiftKey||n!==s&&n!==t||(e.preventDefault(),i.focus()):(e.preventDefault(),s.focus()))}))}},Ke:(t,e)=>{e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Modal Message"),t&&e.setAttribute("aria-labelledby",t)},He:(t,e,s,i)=>{if(t.buttons&&t.buttons.length>0){const n=document.createElement("div");n.className="ab-message-buttons",s.appendChild(n);const r=s.getElementsByClassName("ab-message-text")[0];null!=r&&(r.className+=" ab-with-buttons");const o=n=>r=>(t.ye(s,(()=>{qt(n,t),n.clickAction===Nt.Z.ClickAction.URI?(0,gt.S)(n.uri||"",i||t.openTarget===Nt.Z.OpenTarget.BLANK,r):n.clickAction===Nt.Z.ClickAction.NEWS_FEED&&e()})),r.stopPropagation(),!1);for(let e=0;e<t.buttons.length;e++){const s=t.buttons[e],i=document.createElement("button");i.className="ab-message-button",i.setAttribute("type","button"),(0,Mt.lj)(i,"touchstart");let r=s.text;""===s.text&&(r=""),i.appendChild(document.createTextNode(r)),t.Ae()||(i.style.backgroundColor=(0,Ut.cg)(s.backgroundColor),i.style.color=(0,Ut.cg)(s.textColor),i.style.borderColor=(0,Ut.cg)(s.borderColor)),i.onclick=o(s),n.appendChild(i)}}}};var $t=s(7048);function Kt(t,e,i){if(!g.ZP.rr())return;if((0,Ot.R)(),null==t)return!1;if(t instanceof wt.Z)return S.Z.j.info("User received control for a multivariate test, logging to Braze servers."),xt(t),!0;if(!(t instanceof Nt.Z))return!1;if(t.constructor===Nt.Z)return!1;const n=_t.Z.m();t.Nh();const r=t instanceof It.Z;if(r&&!t.trusted&&!g.ZP.nr())return S.Z.j.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),n.Ji(t.triggerId,Nt.Z.Ie.Ch),!1;if(null==e&&(e=document.body),t.xe()&&e.querySelectorAll(".ab-modal-interactions").length>0)return S.Z.j.info(`Cannot show in-app message ${t.message} because another message is being shown.`),n.Ji(t.triggerId,Nt.Z.Ie.Le),!1;if(Bt.SD.ao()){const e=Bt.SD.mo();if(e===Bt.eh.PORTRAIT&&t.orientation===Nt.Z.Orientation.LANDSCAPE||e===Bt.eh.LANDSCAPE&&t.orientation===Nt.Z.Orientation.PORTRAIT){const s=e===Bt.eh.PORTRAIT?"portrait":"landscape",i=t.orientation===Nt.Z.Orientation.PORTRAIT?"portrait":"landscape";return S.Z.j.info(`Not showing ${i} in-app message ${t.message} because the screen is currently ${s}`),n.Ji(t.triggerId,Nt.Z.Ie.dh),!1}}if(!g.ZP.nr()){let e=!1;if(t.buttons&&t.buttons.length>0){const s=t.buttons;for(let t=0;t<s.length;t++)if(s[t].clickAction===Nt.Z.ClickAction.URI){const i=s[t].uri;e=(0,v.o)(i)}}else t.clickAction===Nt.Z.ClickAction.URI&&(e=(0,v.o)(t.uri));if(e)return S.Z.j.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),n.Ji(t.triggerId,Nt.Z.Ie.Ch),!1}const o=document.createElement("div");if(o.className="ab-iam-root v3",o.className+=function(t){let e="";return t.animateIn&&(e+=" ab-animate-in"),t.animateOut&&(e+=" ab-animate-out"),t instanceof Pt.Z?e+=" ab-effect-fullscreen":t instanceof It.Z?e+=" ab-effect-html":t instanceof kt.Z?e+=" ab-effect-modal":t instanceof Dt.Z&&(e+=" ab-effect-slide"),e}(t),o.setAttribute("role","complementary"),t.Ne()&&(o.id=t.htmlId),g.ZP.nn(g.JY.lo)&&(o.style.zIndex=(g.ZP.nn(g.JY.lo)+1).toString()),e.appendChild(o),t.Ae()){const e=document.createElement("style");e.innerHTML=t.css,e.id=t.Ce(),null!=g.ZP.nn(g.JY.po)&&e.setAttribute("nonce",g.ZP.nn(g.JY.po)),document.getElementsByTagName("head")[0].appendChild(e)}const a=t instanceof Dt.Z,l=function(t,e,i,n,r,o,a,l=document.body){if(t.ke=document.activeElement,t instanceof It.Z)return function(t,e,i,n,r,o){const a=document.createElement("iframe");a.setAttribute("title","Modal Message"),r&&(a.style.zIndex=(r+1).toString());const l=e=>{const s=e.getAttribute("href"),i=e.onclick;return r=>{if(null!=i&&"function"==typeof i&&!1===i.bind(e)(r))return;let o=(0,v.L)(s).abButtonId;if(null!=o&&""!==o||(o=e.getAttribute("id")||void 0),null!=s&&""!==s&&0!==s.indexOf("#")){const i="blank"===(e.getAttribute("target")||"").toLowerCase().replace("_",""),l=n||t.openTarget===Nt.Z.OpenTarget.BLANK||i,u=()=>{Lt(t,o,s),Bt.SD.openUri(s,l,r)};l?u():t.ye(a,u)}else Lt(t,o,s||void 0);return r.stopPropagation(),!1}},u=(t,e,s)=>{const i=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${s}['"]\\)`,n=t.match(new RegExp(i));if(n){const s=`${n[1]}.setAttribute("nonce", "${e}")`;return`${t.slice(0,n.index+n[0].length)};${s};${t.slice(n.index+n[0].length)}`}return null};if(a.onload=()=>{let n=null;if(null!=o){n=document.createElement("html"),n.innerHTML=t.message||"";const e=n.getElementsByTagName("style");for(let t=0;t<e.length;t++)e[t].setAttribute("nonce",o);const s=n.getElementsByTagName("script");for(let t=0;t<s.length;t++){s[t].setAttribute("nonce",o),s[t].innerHTML=s[t].innerHTML.replace(/<style>/g,`<style nonce='${o}'>`);const e=u(s[t].innerHTML,o,"script");e&&(s[t].innerHTML=e);const i=u(s[t].innerHTML,o,"style");i&&(s[t].innerHTML=i)}}const r=a.contentWindow;r.focus(),r.document.write(n?n.innerHTML:t.message||"");const c=r.document.getElementsByTagName("head")[0];if(null!=c){if((0,Ot.D)(c),t.Ae()){const e=document.createElement("style");e.innerHTML=t.css||"",e.id=t.Ce()||"",null!=o&&e.setAttribute("nonce",o),c.appendChild(e)}const e=r.document.createElement("base");null!=e&&(e.setAttribute("target","_parent"),c.appendChild(e))}const h=r.document.getElementsByTagName("title");h&&h.length>0&&a.setAttribute("title",h[0].textContent||"");const d={closeMessage:function(){t.ye(a)},logClick:function(){Lt(t,...arguments)},display:{},web:{}},f=function(){return function(){const t=arguments;Promise.resolve().then(s.bind(s,12261)).then((e=>{g.ZP.fe()?e.requestPushPermission(...Array.prototype.slice.call(t)):S.Z.j.error(w.Go)}))}},p={requestImmediateDataFlush:function(){const t=arguments;Promise.resolve().then(s.bind(s,64650)).then((({requestImmediateDataFlush:e})=>{g.ZP.fe()?e(...Array.prototype.slice.call(t)):S.Z.j.error(w.Go)}))},logCustomEvent:function(){const t=arguments;Promise.resolve().then(s.bind(s,61454)).then((({logCustomEvent:e})=>{g.ZP.fe()?e(...Array.prototype.slice.call(t)):S.Z.j.error(w.Go)}))},logPurchase:function(){const t=arguments;Promise.resolve().then(s.bind(s,61364)).then((({logPurchase:e})=>{g.ZP.fe()?e(...Array.prototype.slice.call(t)):S.Z.j.error(w.Go)}))},unregisterPush:function(){const t=arguments;Promise.resolve().then(s.bind(s,77824)).then((({unregisterPush:e})=>{g.ZP.fe()?e(...Array.prototype.slice.call(t)):S.Z.j.error(w.Go)}))},requestPushPermission:f(),changeUser:function(){const t=arguments;Promise.resolve().then(s.bind(s,34790)).then((({changeUser:e})=>{g.ZP.fe()?e(...Array.prototype.slice.call(t)):S.Z.j.error(w.Go)}))}},m=function(t){return function(){p[t](...Array.prototype.slice.call(arguments))}};for(const t of(0,z.XP)(p))d[t]=m(t);const Z=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup"],b=function(t){return function(){const e=(0,X.P)();e&&e[t](...Array.prototype.slice.call(arguments))}},v={};for(let t=0;t<Z.length;t++)v[Z[t]]=b(Z[t]);d.getUser=function(){return v};const y={showFeed:e},A=function(e){return function(){const s=arguments;t.ye(a,(function(){y[e](...Array.prototype.slice.call(s))}))}},E=d.display;for(const t of(0,z.XP)(y))E[t]=A(t);const C={registerAppboyPushMessages:f()},N=function(t){return function(){C[t](...Array.prototype.slice.call(arguments))}},T=d.web;for(const t of(0,z.XP)(C))T[t]=N(t);if(r.appboyBridge=d,r.brazeBridge=d,t.Pe!==Nt.Z.qe.Ee){const t=r.document.getElementsByTagName("a");for(let e=0;e<t.length;e++)t[e].onclick=l(t[e]);const e=r.document.getElementsByTagName("button");for(let t=0;t<e.length;t++)e[t].onclick=l(e[t])}const P=r.document.body;if(null!=P){t.Ne()&&(P.id=t.htmlId||"");const e=document.createElement("hidden");e.onclick=d.closeMessage,e.className="ab-programmatic-close-button",P.appendChild(e)}r.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==a.className.indexOf("ab-start-hidden")&&(a.className=a.className.replace("ab-start-hidden",""),i(a)),document.activeElement!==a&&a.focus()},a.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",Rt.Z.OS===Gt.T.de){const e=document.createElement("div");return e.className="ab-ios-scroll-wrapper",e.appendChild(a),t.Me=e,e}return t.Me=a,a}(t,e,i,r,o,a);const u=function(t,e,s,i,n,r,o=document.body){let a=null;const l=document.createElement("div");l.className="ab-in-app-message ab-start-hidden ab-background",r&&(l.style.zIndex=(r+1).toString()),t.xe()&&(l.className+=" ab-modal-interactions",l.setAttribute("tabindex","-1")),t.Ae()||(l.style.color=(0,Ut.cg)(t.textColor),l.style.backgroundColor=(0,Ut.cg)(t.backgroundColor),(0,Ut.Qm)(t.backgroundColor)&&(l.className+=" ab-no-shadow"));const u=()=>{-1!==l.className.indexOf("ab-start-hidden")&&(l.className=l.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?i(`Cannot show in-app message ${t.message} because another message is being shown.`,Nt.Z.Ie.Le):s(l))},c=(e=!0)=>{let s=document.querySelectorAll(".ab-iam-root");s&&0!==s.length||(s=o.querySelectorAll(".ab-iam-root")),s&&s.length>0&&(s[0].classList.remove("ab-iam-img-loading"),a&&(clearTimeout(a),a=null),e?u():S.Z.j.error(`Cannot show in-app message ${t.message} because the image failed to load.`))};t.imageStyle===Nt.Z.ImageStyle.GRAPHIC&&(l.className+=" graphic"),t.orientation===Nt.Z.Orientation.LANDSCAPE&&(l.className+=" landscape"),null!=t.buttons&&0===t.buttons.length&&(t.clickAction!==Nt.Z.ClickAction.NONE&&(l.className+=" ab-clickable"),l.onclick=s=>(t.ye(l,(()=>{Ft(t),t.clickAction===Nt.Z.ClickAction.URI?(0,gt.S)(t.uri||"",n||t.openTarget===Nt.Z.OpenTarget.BLANK,s):t.clickAction===Nt.Z.ClickAction.NEWS_FEED&&e()})),s.stopPropagation(),!1));const h=(0,jt.B)("Close Message",t.Ae()?void 0:(0,Ut.cg)(t.closeButtonColor),(()=>{t.ye(l)}));l.appendChild(h),r&&(h.style.zIndex=(r+2).toString());const d=document.createElement("div");d.className="ab-message-text";const f=(t.messageAlignment||t.Te).toLowerCase();d.className+=" "+f+"-aligned";let p=!1;const g=document.createElement("div");if(g.className="ab-image-area",t.imageUrl){if(t.cropType===Nt.Z.CropType.CENTER_CROP){const e=document.createElement("span");e.className="ab-center-cropped-img",e.style.backgroundImage="url("+t.imageUrl+")",e.setAttribute("role","img"),e.setAttribute("aria-label","Modal Image"),t.Be(e),g.appendChild(e)}else{const e=document.createElement("img");if(e.setAttribute("src",t.imageUrl),t.Be(e),0===document.querySelectorAll(".ab-iam-img-loading").length){p=!0;const t=document.querySelectorAll(".ab-iam-root");t&&t.length>0&&t[0].classList.add("ab-iam-img-loading"),a=window.setTimeout((()=>{c(!1)}),6e4),e.onload=()=>{c()},e.onerror=()=>{c(!1)}}g.appendChild(e)}l.appendChild(g),d.className+=" ab-with-image"}else if(t.icon){g.className+=" ab-icon-area";const e=document.createElement("span");e.className="ab-icon",t.Ae()||(e.style.backgroundColor=(0,Ut.cg)(t.iconBackgroundColor),e.style.color=(0,Ut.cg)(t.iconColor));const s=document.createElement("i");s.className="fa",s.appendChild(document.createTextNode(t.icon)),s.setAttribute("aria-hidden","true"),e.appendChild(s),g.appendChild(e),l.appendChild(g),d.className+=" ab-with-icon"}if((0,Mt.lj)(d,"touchstart"),t.header&&t.header.length>0){const e=document.createElement("h1");e.className="ab-message-header",t.De=S.Z.Z.Y(),e.id=t.De;const s=(t.headerAlignment||Nt.Z.TextAlignment.CENTER).toLowerCase();e.className+=" "+s+"-aligned",t.Ae()||(e.style.color=(0,Ut.cg)(t.headerTextColor)),e.appendChild(document.createTextNode(t.header)),d.appendChild(e)}return d.appendChild(t.Ge()),l.appendChild(d),p||u(),t.Me=l,l}(t,e,i,n,r,o,l);if(t instanceof Pt.Z||t instanceof kt.Z){const s=t instanceof Pt.Z?"ab-fullscreen":"ab-modal";u.className+=` ${s} ab-centered`,Jt.He(t,e,u,r),Jt.Je(u),Jt.Ke(t.De,u)}else if(t instanceof Dt.Z){u.className+=" ab-slideup";const e=u.getElementsByClassName("ab-close-button")[0];if(null!=e){const s=(0,Mt.MK)("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",t.Ae()?void 0:(0,Ut.cg)(t.closeButtonColor));s.setAttribute("class","ab-chevron"),e.appendChild(s)}let s,i;(0,Mt.FZ)(u,Mt.mQ.W,(t=>{u.className+=" ab-swiped-left",null!=e&&null!=e.onclick&&e.onclick(t)})),(0,Mt.FZ)(u,Mt.mQ.X,(t=>{u.className+=" ab-swiped-right",null!=e&&null!=e.onclick&&e.onclick(t)})),t.slideFrom===Nt.Z.SlideFrom.TOP?(s=Mt.mQ.Oe,i=" ab-swiped-up"):(s=Mt.mQ.Qe,i=" ab-swiped-down"),(0,Mt.FZ)(u,s,(t=>{u.className+=i,null!=e&&null!=e.onclick&&e.onclick(t)}))}return u}(t,(()=>{Promise.resolve().then(s.bind(s,33545)).then((t=>{g.ZP.fe()?t.showFeed():S.Z.j.error(w.Go)}))}),(e=>{if(t.xe()&&t.io()){const s=document.createElement("div");if(s.className="ab-page-blocker",t.Ae()||(s.style.backgroundColor=(0,Ut.cg)(t.frameColor)),g.ZP.nn(g.JY.lo)&&(s.style.zIndex=g.ZP.nn(g.JY.lo).toString()),o.appendChild(s),!g.ZP.nn(g.JY.mh)){const i=(new Date).valueOf();s.onclick=s=>{(new Date).valueOf()-i>Nt.Z.Ph&&(t.ye(e),s.stopPropagation())}}o.appendChild(e),e.focus(),t.Ah(o)}else if(a){const s=document.querySelectorAll(".ab-slideup");let i=null;for(let t=s.length-1;t>=0;t--)if(s[t]!==e){i=s[t];break}if(t.slideFrom===Nt.Z.SlideFrom.TOP){let t=0;null!=i&&(t=i.offsetTop+i.offsetHeight),e.style.top=Math.max(t,0)+"px"}else{let t=0;null!=i&&(t=(window.innerHeight||document.documentElement.clientHeight)-i.offsetTop),e.style.bottom=Math.max(t,0)+"px"}}else if(r&&!g.ZP.nn(g.JY.mh)){const s=t;(0,$t.f)(e)&&e.contentWindow&&e.contentWindow.addEventListener("keydown",(function(t){t.keyCode===zt.m._h&&s.closeMessage()}))}xt(t),t.dismissType===Nt.Z.DismissType.AUTO_DISMISS&&setTimeout((()=>{o.contains(e)&&t.ye(e)}),t.duration),"function"==typeof i&&i()}),((e,s)=>{S.Z.j.info(e),n.Ji(t.triggerId,s)}),g.ZP.nn(g.JY.fo),g.ZP.nn(g.JY.lo),g.ZP.nn(g.JY.po),e);return(r||a)&&(o.appendChild(l),t.Ah(o)),!0}function Ht(t){if(g.ZP.rr())return"function"!=typeof t?null:_t.Z.m()._i((function(e){return t(e[0]),e.slice(1)}))}function Yt(){if(!g.ZP.rr())return;(0,Ot.R)();const t=_t.Z.m();if(null==t.Pi()){const e=Ht((t=>Kt(t)));t.Oi(e)}return t.Pi()}function Wt(t){if(g.ZP.rr())return t instanceof wt.Z?(S.Z.j.info("Not deferring since this is a ControlMessage."),!1):t instanceof Nt.Z?_t.Z.m().he(t):(S.Z.j.info("Not an instance of InAppMessage, ignoring."),!1)}function Vt(){if(g.ZP.rr())return _t.Z.m().Re()}var Xt=s(74556);function Qt(){if(g.ZP.rr())return Xt.Z.isPushBlocked()}function te(){if(g.ZP.rr())return Xt.Z.isPushPermissionGranted()}function ee(){if(g.ZP.rr())return Xt.Z.isPushSupported()}var se=s(12261),ie=s(77824),ne=s(17615),re=s(12962),oe=s(992),ae=s(12611);function le(t){if(!g.ZP.rr())return;const e=g.ZP.tr();if(e&&!e.vi())return S.Z.j.info("Feature flags are not enabled."),new re.Z(t);const s=ae.Z.er().Di();return s[t]?s[t]:new re.Z(t)}function ue(){if(!g.ZP.rr())return;const t=[],e=g.ZP.tr();if(e&&!e.vi())return S.Z.j.info("Feature flags are not enabled."),t;const s=ae.Z.er().Di();for(const e in s)t.push(s[e]);return t}function ce(t){if(!g.ZP.rr())return;const e=ue();return e&&"function"==typeof t&&t(e),ae.Z.er().ri(t)}function he(t){if(!g.ZP.rr())return;if(!t)return!1;const e=ae.Z.er().Di();if(!e[t])return!1;const s=e[t].trackingString;if(!s)return S.Z.j.info("Not logging a feature flag impression. The feature flag was not part of any matching campaign."),!1;const i=ae.Z.er().Ni();if(i[s])return!1;i[s]=!0,ae.Z.er().xi(i);const n={fid:t,fts:s};return C.Z.N(S.Z.q.Fr,n).O}}}]);